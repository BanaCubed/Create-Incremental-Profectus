var Hi=Object.defineProperty;var Wi=(n,e,t)=>e in n?Hi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var E=(n,e,t)=>Wi(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-GVBARt8q.js";import{aX as ot,bo as u,X as J,aZ as R,aR as k,A as T,b0 as Ce,bS as ft,aA as ee,az as rt,w as F,aJ as un,G as m,bf as Q,F as N,a$ as De,z as O,aC as Ie,P as g,Q as s,bN as G,b9 as Et,aT as yt,y as X,bP as cn,bF as Qi,ay as Be,l as _n,T as Ji,ap as Yi,ar as re,bI as be,am as xt,bb as Ot,bj as Ye,aO as Dn,bl as Ki,au as Rn,aB as Zi,bJ as Ln,bE as Xi,bA as er,aI as tr,O as nr,bk as Mn,b3 as ir,x as rr}from"./@vue-CCfogNd1.js";import{L as Fe}from"./lz-string-BZNGtwso.js";import{c as qn}from"./nanoevents-BxCKNB1V.js";import{D as Un}from"./vuedraggable-BgvaSe-I.js";import{Y as ar}from"./vue-next-select-CgtHQcl0.js";import{p as sr}from"./vue-textarea-autosize-DLc4kbjP.js";import{i as or}from"./unofficial-galaxy-sdk-C_siawBx.js";import{s as lr,u as ur}from"./vue-toastification-CjoTmBGg.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();const cr="./projInfo-schema.json",dr="Create Incremental",fr="A project made in Profectus",gr="CreateIncremental",mr="BanaCubed",pr="Create Incremental Server",vr="https://discord.gg/wt5XyPRtte",hr="1.0",br="Universal // Î²5: Notations++",yr=!0,wr=!0,Nr=2,Cr=!1,Sr=null,kr="",xr=["main"],Ir=3600,Mr=1,Tr=!0,Pr="base64",$r=!1,H={$schema:cr,title:dr,description:fr,id:gr,author:mr,discordName:pr,discordLink:vr,versionNumber:hr,versionTitle:br,allowGoBack:yr,defaultShowSmall:wr,defaultDecimalsShown:Nr,useHeader:Cr,banner:Sr,logo:kr,initialTabs:xr,maxTickLength:Ir,offlineLimit:Mr,enablePausing:Tr,exportEncoding:Pr,disableHealthWarning:$r},Vr=ot({id:"",devSpeed:1,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}}),$=window.player=Vr;function Ke(n){return JSON.stringify(n,(e,t)=>u(t)??null)}const Fr=J({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,i=R(!1),r=R(null);function a(){t("click"),r.value!=null&&clearTimeout(r.value),i.value=!1,rt(()=>{i.value=!0,r.value=setTimeout(()=>i.value=!1,500)})}return(d,o)=>(k(),T("button",{onClick:ft(a,["stop"]),class:ee(["feedback",{activated:i.value,left:d.left}])},[Ce(d.$slots,"default",{},void 0,!0)],2))}}),te=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},dn=te(Fr,[["__scopeId","data-v-f82eae5d"]]),Ar={class:"error"},Er={class:"error-title"},Or={class:"error-details",style:{"margin-top":"-10px"}},_r={key:0},Dr={class:"instructions"},Rr=["href"],Lr={key:0,style:{"margin-top":"20px"}},qr={class:"error-details"},Ur={key:0,style:{"margin-top":"10px"}},Br={key:1,style:{"margin-top":"10px"}},zr=J({__name:"Error",props:{errors:{}},setup(n){const e=n,t=F(()=>e.errors[0]),i=F(()=>e.errors.map(d=>d.stack==null?[]:d.stack.split(`
`))),r=F(()=>e.errors.map(d=>d.cause==null?[]:(typeof d.cause=="string"?d.cause:JSON.stringify(d.cause)).split(`
`)));function a(){let d=Ke($);switch(H.exportEncoding){default:console.warn(`Unknown save encoding: ${H.exportEncoding}. Defaulting to lz`);case"lz":d=Fe.compressToUTF16(d);break;case"base64":d=btoa(unescape(encodeURIComponent(d)));break;case"plain":break}console.log(d);const o=document.createElement("textarea");o.value=d,document.body.appendChild(o),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(o)}return un(()=>{$.autosave=!1,$.devSpeed=0}),(d,o)=>(k(),T("div",Ar,[m("h1",Er,Q(t.value.name)+": "+Q(t.value.message),1),m("div",Or,[t.value.cause?(k(),T("div",_r,[(k(!0),T(N,null,De(r.value[0],c=>(k(),T("div",{key:c},Q(c),1))),128))])):O("",!0),t.value.stack?(k(),T("div",{key:1,style:Ie(t.value.cause?"margin-top: 10px":"")},[(k(!0),T(N,null,De(i.value[0],c=>(k(),T("div",{key:c},Q(c),1))),128))],4)):O("",!0)]),m("div",Dr,[o[2]||(o[2]=g(" Check the console for more details, and consider sharing it with the developers on ")),m("a",{href:u(H).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,Rr),o[3]||(o[3]=g("! ")),s(dn,{onClick:a,class:"button",style:{display:"inline-flex"}},{default:G(()=>o[0]||(o[0]=[m("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),m("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),o[4]||(o[4]=m("br",null,null,-1)),d.errors.length>1?(k(),T("div",Lr,o[1]||(o[1]=[m("h3",null,"Other errors",-1)]))):O("",!0),(k(!0),T(N,null,De(d.errors.slice(1),(c,p)=>(k(),T("div",{key:p,style:{"margin-top":"20px"}},[m("details",qr,[m("summary",null,Q(c.name)+": "+Q(c.message),1),c.cause?(k(),T("div",Ur,[(k(!0),T(N,null,De(r.value[p+1],y=>(k(),T("div",{key:y},Q(y),1))),128))])):O("",!0),c.stack?(k(),T("div",Br,[(k(!0),T(N,null,De(i.value[p+1],y=>(k(),T("div",{key:y},Q(y),1))),128))])):O("",!0)])]))),128))])]))}}),Bn=te(zr,[["__scopeId","data-v-2524e23e"]]),wt={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"4px solid rgba(0, 0, 0, 0.25)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var fn=(n=>(n.Paper="paper",n.Nordic="nordic",n))(fn||{});const _t={paper:{...wt,variables:{...wt.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--highlighted":"#434c5e","--bought":"#5CAA58","--outline":"#333c4a","--border-radius":"7px"},floatingTabs:!1},nordic:{...wt,variables:{...wt.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--highlighted":"#434c5e","--bought":"#5CAA58","--outline":"#333c4a","--border-radius":"7px"},floatingTabs:!1}},Y=window.state=Et({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:ot([])}),oe=qn();"fonts"in document&&(document.fonts.onloadingdone=()=>oe.emit("fontsLoaded"));document.onmousemove=function(){Y.mouseActivity[Y.mouseActivity.length-1]=!0};const Gr=J({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var b;const t=e,i=R({}),r=new ResizeObserver(c),a=R(null);un(()=>{const w=a.value;w!=null&&r.observe(w)});let d=!0,o=R((b=a.value)==null?void 0:b.getBoundingClientRect());function c(){d&&(d=!1,rt(()=>{var w;o.value=(w=a.value)==null?void 0:w.getBoundingClientRect(),Object.values(i.value).filter(v=>v).forEach(v=>v.rect=v.element.getBoundingClientRect()),t("updateNodes",i.value),d=!0}))}oe.on("fontsLoaded",c);const p={attributes:!1,childList:!0,subtree:!1};yt(Gn,(w,v)=>{const S=new MutationObserver(()=>y(w));S.observe(v,p),i.value[w]={element:v,observer:S,rect:v.getBoundingClientRect()},c()}),yt(jn,w=>{var v;(v=i.value[w])==null||v.observer.disconnect(),i.value[w]=void 0,c()}),yt(Hn,i),yt(Wn,o);function y(w){const v=i.value[w];v!=null&&(v.rect=v.element.getBoundingClientRect(),t("updateNodes",i.value))}return(w,v)=>(k(),T(N,null,[Ce(w.$slots,"default",{},void 0,!0),m("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}}),zn=te(Gr,[["__scopeId","data-v-4fc505f1"]]),jr={class:"modal-wrapper"},Hr=["width"],Wr={class:"modal-header"},Qr={class:"modal-body"},Jr={class:"modal-footer"},ze=J({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const i=n,r=t,a=F(()=>i.modelValue||o.value);function d(){i.preventClosing!==!0&&r("update:modelValue",!1)}const o=R(!1),c=R(null),p=F(()=>{var y;return((y=c.value)==null?void 0:y.nodes)??null});return e({isOpen:a,nodes:p}),(y,b)=>(k(),X(Ji,{to:"#modal-root"},[s(_n,{name:"modal",onBeforeEnter:b[0]||(b[0]=w=>o.value=!0),onAfterLeave:b[1]||(b[1]=w=>o.value=!1),appear:""},{default:G(()=>[cn(m("div",Be({class:"modal-mask",onPointerdown:ft(d,["self"])},y.$attrs),[m("div",jr,[m("div",{class:"modal-container",width:y.width},[m("div",Wr,[Ce(y.$slots,"header",{shown:a.value})]),m("div",Qr,[s(zn,{ref_key:"contextRef",ref:c},{default:G(()=>[Ce(y.$slots,"body",{shown:a.value})]),_:3},512)]),m("div",Jr,[Ce(y.$slots,"footer",{shown:a.value},()=>[m("div",{class:"modal-default-footer"},[b[2]||(b[2]=m("div",{class:"modal-default-flex-grow"},null,-1)),m("button",{class:"button modal-default-button",onClick:d}," Close ")])])])],8,Hr)])],16),[[Qi,y.modelValue]])]),_:3})]))}});function Yr(n){return(n[0]+n.slice(1).replace(/[A-Z]/g,e=>`-${e}`)).toLowerCase()}function Kr(n){return typeof n=="function"}var ue=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(ue||{});function D(n){return Kr(n)&&n.length===0?F(n):n}const tt=Symbol("ProxyState"),It=Symbol("AfterEvaluation");function me(n,e={}){const t=e;let i=!1,r=!1;const a=[];function d(){if(!i){if(r)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");r=!0,Object.assign(t,n.call(t,t)),i=!0,a.forEach(c=>c(t))}return t}function o(c){i?c(t):a.push(c)}return new Proxy(t,{get(c,p){if(p===tt)return d();if(p===It)return o;const y=d()[p];return y!=null&&typeof y=="object"&&ke in y?y[ke]:y},set(c,p,y){return d()[p]=y,!0},has(c,p){return p===tt||p===It?!0:Reflect.has(d(),p)},ownKeys(){return Reflect.ownKeys(d())},getOwnPropertyDescriptor(c,p){return i||(Object.assign(t,n.call(t,t)),i=!0),Object.getOwnPropertyDescriptor(c,p)}})}function Zr(n,e){It in n?n[It](e):e(n)}const Gn=Symbol("RegisterNode"),jn=Symbol("UnregisterNode"),Hn=Symbol("Nodes"),Wn=Symbol("Bounds"),he=Et({});window.layers=he;const nt={},we=[];function gn(n,e){return me(()=>{const t=qn();we.push(n),nt[n]=new Set;const i={id:n,emitter:t,...t,nodes:R({}),minimized:Me(!1,!1)},r=e(i),{color:a,display:d,classes:o,style:c,name:p,forceHideGoBack:y,minWidth:b,minimizable:w,minimizedDisplay:v,...S}=r;if(we[we.length-1]==null||we[we.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${we}
Trying to pop ${n}`);we.pop();const M=D(c),A={...i,...S,color:D(a),display:d,classes:D(o),style:F(()=>{let x=u(A.minWidth);return(typeof x=="number"||!Number.isNaN(parseInt(x)))&&(x=x+"px"),{...u(M),...i.minimized.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:x,flexBasis:x,margin:""}}}),name:D(p)??n,forceHideGoBack:D(y),minWidth:D(b)??600,minimizable:D(w)??!0,minimizedDisplay:v};return A})}function Xr(n,e){if(console.info("Adding layer",n.id),he[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,he[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),he[n.id]=n,oe.emit("addLayer",n,e.layers[n.id])}function ea(n){console.info("Removing layer",n.id),oe.emit("removeLayer",n),delete he[n.id]}oe.on("update",function(e){Object.values(he).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(he).forEach(t=>{t==null||t.emit("update",e)}),Object.values(he).forEach(t=>{t==null||t.emit("postUpdate",e)})});class ta{constructor(e){E(this,"map",new Map);E(this,"first");E(this,"last");E(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const i=new na(e,t);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(e,i);this.map.size>this.maxSize;){const r=this.last;this.map.delete(r.key),this.last=r.prev,this.last.next=void 0}}}class na{constructor(e,t){E(this,"key");E(this,"value");E(this,"next");E(this,"prev");this.key=e,this.value=t}}const nn=17,ia=9e15,ra=Math.log10(9e15),aa=1/9e15,sa=308,oa=-324,Tn=5,la=1023,ua=function(){const n=[];for(let t=oa+1;t<=sa;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),Ge=[2,Math.E,3,4,5,6,7,8,9,10],ca=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],da=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let C=function(e){return l.fromValue_noAlloc(e)},z=function(n,e,t){return l.fromComponents(n,e,t)},W=function(e,t,i){return l.fromComponents_noNormalize(e,t,i)};const Oe=function(e,t){const i=t+1,r=Math.ceil(Math.log10(Math.abs(e))),a=Math.round(e*Math.pow(10,i-r))*Math.pow(10,r-i);return parseFloat(a.toFixed(Math.max(i-r,0)))},rn=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},fa=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const i=n*n;let r=n;return t=t+1/(12*r),r=r*i,t=t+1/(360*r),r=r*i,t=t+1/(1260*r),r=r*i,t=t+1/(1680*r),r=r*i,t=t+1/(1188*r),r=r*i,t=t+691/(360360*r),r=r*i,t=t+7/(1092*r),r=r*i,t=t+3617/(122400*r),Math.exp(t)/e},Qn=.5671432904097838,Pn=function(n,e=1e-10){let t,i;if(!Number.isFinite(n)||n===0)return n;if(n===1)return Qn;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let r=0;r<100;++r){if(i=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(i-t)<e*Math.abs(i))return i;t=i}throw Error(`Iteration failed to converge: ${n.toString()}`)};function $n(n,e=1e-10){let t,i,r,a;if(!Number.isFinite(n.mag)||n.eq(l.dZero))return n;if(n.eq(l.dOne))return l.fromNumber(Qn);t=l.ln(n);for(let d=0;d<100;++d){if(i=t.neg().exp(),r=t.sub(n.mul(i)),a=t.sub(r.div(t.add(1).sub(t.add(2).mul(r).div(l.mul(2,t).add(2))))),l.abs(a.sub(t)).lt(l.abs(a).mul(e)))return a;t=a}throw Error(`Iteration failed to converge: ${n.toString()}`)}const h=class h{constructor(e){E(this,"sign",0);E(this,"mag",0);E(this,"layer",0);e instanceof h?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/ua(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,i){return new h().fromComponents(e,t,i)}static fromComponents_noNormalize(e,t,i){return new h().fromComponents_noNormalize(e,t,i)}static fromMantissaExponent(e,t){return new h().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new h().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new h().fromDecimal(e)}static fromNumber(e){return new h().fromNumber(e)}static fromString(e){return new h().fromString(e)}static fromValue(e){return new h().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof h)return e;if(typeof e=="string"){const t=h.fromStringCache.get(e);return t!==void 0?t:h.fromString(e)}else return typeof e=="number"?h.fromNumber(e):h.dZero}static abs(e){return C(e).abs()}static neg(e){return C(e).neg()}static negate(e){return C(e).neg()}static negated(e){return C(e).neg()}static sign(e){return C(e).sign}static sgn(e){return C(e).sign}static round(e){return C(e).round()}static floor(e){return C(e).floor()}static ceil(e){return C(e).ceil()}static trunc(e){return C(e).trunc()}static add(e,t){return C(e).add(t)}static plus(e,t){return C(e).add(t)}static sub(e,t){return C(e).sub(t)}static subtract(e,t){return C(e).sub(t)}static minus(e,t){return C(e).sub(t)}static mul(e,t){return C(e).mul(t)}static multiply(e,t){return C(e).mul(t)}static times(e,t){return C(e).mul(t)}static div(e,t){return C(e).div(t)}static divide(e,t){return C(e).div(t)}static recip(e){return C(e).recip()}static reciprocal(e){return C(e).recip()}static reciprocate(e){return C(e).reciprocate()}static cmp(e,t){return C(e).cmp(t)}static cmpabs(e,t){return C(e).cmpabs(t)}static compare(e,t){return C(e).cmp(t)}static isNaN(e){return e=C(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=C(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return C(e).eq(t)}static equals(e,t){return C(e).eq(t)}static neq(e,t){return C(e).neq(t)}static notEquals(e,t){return C(e).notEquals(t)}static lt(e,t){return C(e).lt(t)}static lte(e,t){return C(e).lte(t)}static gt(e,t){return C(e).gt(t)}static gte(e,t){return C(e).gte(t)}static max(e,t){return C(e).max(t)}static min(e,t){return C(e).min(t)}static minabs(e,t){return C(e).minabs(t)}static maxabs(e,t){return C(e).maxabs(t)}static clamp(e,t,i){return C(e).clamp(t,i)}static clampMin(e,t){return C(e).clampMin(t)}static clampMax(e,t){return C(e).clampMax(t)}static cmp_tolerance(e,t,i){return C(e).cmp_tolerance(t,i)}static compare_tolerance(e,t,i){return C(e).cmp_tolerance(t,i)}static eq_tolerance(e,t,i){return C(e).eq_tolerance(t,i)}static equals_tolerance(e,t,i){return C(e).eq_tolerance(t,i)}static neq_tolerance(e,t,i){return C(e).neq_tolerance(t,i)}static notEquals_tolerance(e,t,i){return C(e).notEquals_tolerance(t,i)}static lt_tolerance(e,t,i){return C(e).lt_tolerance(t,i)}static lte_tolerance(e,t,i){return C(e).lte_tolerance(t,i)}static gt_tolerance(e,t,i){return C(e).gt_tolerance(t,i)}static gte_tolerance(e,t,i){return C(e).gte_tolerance(t,i)}static pLog10(e){return C(e).pLog10()}static absLog10(e){return C(e).absLog10()}static log10(e){return C(e).log10()}static log(e,t){return C(e).log(t)}static log2(e){return C(e).log2()}static ln(e){return C(e).ln()}static logarithm(e,t){return C(e).logarithm(t)}static pow(e,t){return C(e).pow(t)}static pow10(e){return C(e).pow10()}static pow_base(e,t){return C(e).pow_base(t)}static root(e,t){return C(e).root(t)}static factorial(e,t){return C(e).factorial()}static gamma(e,t){return C(e).gamma()}static lngamma(e,t){return C(e).lngamma()}static exp(e){return C(e).exp()}static sqr(e){return C(e).sqr()}static sqrt(e){return C(e).sqrt()}static cube(e){return C(e).cube()}static cbrt(e){return C(e).cbrt()}static tetrate(e,t=2,i=W(1,0,1)){return C(e).tetrate(t,i)}static iteratedexp(e,t=2,i=W(1,0,1)){return C(e).iteratedexp(t,i)}static iteratedlog(e,t=10,i=1){return C(e).iteratedlog(t,i)}static layeradd10(e,t){return C(e).layeradd10(t)}static layeradd(e,t,i=10){return C(e).layeradd(t,i)}static slog(e,t=10){return C(e).slog(t)}static lambertw(e){return C(e).lambertw()}static ssqrt(e){return C(e).ssqrt()}static pentate(e,t=2,i=W(1,0,1)){return C(e).pentate(t,i)}static sin(e){return C(e).sin()}static cos(e){return C(e).cos()}static tan(e){return C(e).tan()}static asin(e){return C(e).asin()}static acos(e){return C(e).acos()}static atan(e){return C(e).atan()}static sinh(e){return C(e).sinh()}static cosh(e){return C(e).cosh()}static tanh(e){return C(e).tanh()}static asinh(e){return C(e).asinh()}static acosh(e){return C(e).acosh()}static atanh(e){return C(e).atanh()}static affordGeometricSeries(e,t,i,r){return this.affordGeometricSeries_core(C(e),C(t),C(i),r)}static sumGeometricSeries(e,t,i,r){return this.sumGeometricSeries_core(e,C(t),C(i),r)}static affordArithmeticSeries(e,t,i,r){return this.affordArithmeticSeries_core(C(e),C(t),C(i),C(r))}static sumArithmeticSeries(e,t,i,r){return this.sumArithmeticSeries_core(C(e),C(t),C(i),C(r))}static efficiencyOfPurchase(e,t,i){return this.efficiencyOfPurchase_core(C(e),C(t),C(i))}static randomDecimalForTesting(e){if(Math.random()*20<1)return W(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return W(t,0,1);const i=Math.floor(Math.random()*(e+1));let r=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let a=Math.pow(10,r);return Math.random()>.9&&(a=Math.trunc(a)),z(t,i,a)}static affordGeometricSeries_core(e,t,i,r){const a=t.mul(i.pow(r));return h.floor(e.div(a).mul(i.sub(1)).add(1).log10().div(i.log10()))}static sumGeometricSeries_core(e,t,i,r){return t.mul(i.pow(r)).mul(h.sub(1,i.pow(e))).div(h.sub(1,i))}static affordArithmeticSeries_core(e,t,i,r){const d=t.add(r.mul(i)).sub(i.div(2)),o=d.pow(2);return d.neg().add(o.add(i.mul(e).mul(2)).sqrt()).div(i).floor()}static sumArithmeticSeries_core(e,t,i,r){const a=t.add(r.mul(i));return e.div(2).mul(a.mul(2).plus(e.sub(1).mul(i)))}static efficiencyOfPurchase_core(e,t,i){return e.div(t).add(e.div(i))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<aa)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=ia)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<ra&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this.normalize(),this}fromComponents_noNormalize(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,i=h.fromStringCache.get(t);if(i!==void 0)return this.fromDecimal(i);e=e.replace(",","");const r=e.split("^^^");if(r.length===2){const M=parseFloat(r[0]),A=parseFloat(r[1]),x=r[1].split(";");let V=1;if(x.length===2&&(V=parseFloat(x[1]),isFinite(V)||(V=1)),isFinite(M)&&isFinite(A)){const _=h.pentate(M,A,V);return this.sign=_.sign,this.layer=_.layer,this.mag=_.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}const a=e.split("^^");if(a.length===2){const M=parseFloat(a[0]),A=parseFloat(a[1]),x=a[1].split(";");let V=1;if(x.length===2&&(V=parseFloat(x[1]),isFinite(V)||(V=1)),isFinite(M)&&isFinite(A)){const _=h.tetrate(M,A,V);return this.sign=_.sign,this.layer=_.layer,this.mag=_.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}const d=e.split("^");if(d.length===2){const M=parseFloat(d[0]),A=parseFloat(d[1]);if(isFinite(M)&&isFinite(A)){const x=h.pow(M,A);return this.sign=x.sign,this.layer=x.layer,this.mag=x.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}e=e.trim().toLowerCase();let o,c,p=e.split("pt");if(p.length===2){o=10,c=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let M=parseFloat(p[1]);if(isFinite(M)||(M=1),isFinite(o)&&isFinite(c)){const A=h.tetrate(o,c,M);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}if(p=e.split("p"),p.length===2){o=10,c=parseFloat(p[0]),p[1]=p[1].replace("(",""),p[1]=p[1].replace(")","");let M=parseFloat(p[1]);if(isFinite(M)||(M=1),isFinite(o)&&isFinite(c)){const A=h.tetrate(o,c,M);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}const y=e.split("e"),b=y.length-1;if(b===0){const M=parseFloat(e);if(isFinite(M))return this.fromNumber(M),h.fromStringCache.size>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}else if(b===1){const M=parseFloat(e);if(isFinite(M)&&M!==0)return this.fromNumber(M),h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}const w=e.split("e^");if(w.length===2){this.sign=1,w[0].charAt(0)=="-"&&(this.sign=-1);let M="";for(let A=0;A<w[1].length;++A){const x=w[1].charCodeAt(A);if(x>=43&&x<=57||x===101)M+=w[1].charAt(A);else return this.layer=parseFloat(M),this.mag=parseFloat(w[1].substr(A+1)),this.normalize(),h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}}if(b<1)return this.sign=0,this.layer=0,this.mag=0,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this;const v=parseFloat(y[0]);if(v===0)return this.sign=0,this.layer=0,this.mag=0,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this;let S=parseFloat(y[y.length-1]);if(b>=2){const M=parseFloat(y[y.length-2]);isFinite(M)&&(S*=Math.sign(M),S+=rn(M))}if(!isFinite(v))this.sign=y[0]==="-"?-1:1,this.layer=b,this.mag=S;else if(b===1)this.sign=Math.sign(v),this.layer=1,this.mag=S+Math.log10(Math.abs(v));else if(this.sign=Math.sign(v),this.layer=b,b===2){const M=h.mul(z(1,2,S),C(v));return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}else this.mag=S;return this.normalize(),h.fromStringCache.maxSize>=1&&h.fromStringCache.set(t,h.fromDecimal(this)),this}fromValue(e){return e instanceof h?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Oe(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Oe(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Tn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Oe(this.m,e)+"e"+Oe(this.e,e):this.layer===1?Oe(this.m,e)+"e"+Oe(this.e,e):this.layer<=Tn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Oe(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Oe(this.mag,e)}abs(){return W(this.sign===0?0:1,this.layer,this.mag)}neg(){return W(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?h.dZero:this.layer===0?z(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?h.dZero:this.layer===0?z(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?h.dZero:this.layer===0?z(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?h.dZero:this.layer===0?z(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=C(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return W(0,0,0);let i,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(h.cmpabs(this,t)>0?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return h.fromNumber(i.sign*i.mag+r.sign*r.mag);const a=i.layer*Math.sign(i.mag),d=r.layer*Math.sign(r.mag);if(a-d>=2)return i;if(a===0&&d===-1){if(Math.abs(r.mag-Math.log10(i.mag))>nn)return i;{const o=Math.pow(10,Math.log10(i.mag)-r.mag),c=r.sign+i.sign*o;return z(Math.sign(c),1,r.mag+Math.log10(Math.abs(c)))}}if(a===1&&d===0){if(Math.abs(i.mag-Math.log10(r.mag))>nn)return i;{const o=Math.pow(10,i.mag-Math.log10(r.mag)),c=r.sign+i.sign*o;return z(Math.sign(c),1,Math.log10(r.mag)+Math.log10(Math.abs(c)))}}if(Math.abs(i.mag-r.mag)>nn)return i;{const o=Math.pow(10,i.mag-r.mag),c=r.sign+i.sign*o;return z(Math.sign(c),1,r.mag+Math.log10(Math.abs(c)))}}plus(e){return this.add(e)}sub(e){return this.add(C(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=C(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return W(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return W(this.sign*t.sign,0,1);let i,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return h.fromNumber(i.sign*r.sign*i.mag*r.mag);if(i.layer>=3||i.layer-r.layer>=2)return z(i.sign*r.sign,i.layer,i.mag);if(i.layer===1&&r.layer===0)return z(i.sign*r.sign,1,i.mag+Math.log10(r.mag));if(i.layer===1&&r.layer===1)return z(i.sign*r.sign,1,i.mag+r.mag);if(i.layer===2&&r.layer===1){const a=z(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return z(i.sign*r.sign,a.layer+1,a.sign*a.mag)}if(i.layer===2&&r.layer===2){const a=z(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return z(i.sign*r.sign,a.layer+1,a.sign*a.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=C(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?h.dNaN:this.layer===0?z(this.sign,0,1/this.mag):z(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=C(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=C(e),i=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return i>r?1:i<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=C(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=C(e);return this.lt(t)?t:this}min(e){const t=C(e);return this.gt(t)?t:this}maxabs(e){const t=C(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=C(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const i=C(e);return this.eq_tolerance(i,t)?0:this.cmp(i)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const i=C(e);if(t==null&&(t=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;let r=this.mag,a=i.mag;return this.layer>i.layer&&(a=rn(a)),this.layer<i.layer&&(r=rn(r)),Math.abs(r-a)<=t*Math.max(Math.abs(r),Math.abs(a))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const i=C(e);return!this.eq_tolerance(i,t)&&this.lt(i)}lte_tolerance(e,t){const i=C(e);return this.eq_tolerance(i,t)||this.lt(i)}gt_tolerance(e,t){const i=C(e);return!this.eq_tolerance(i,t)&&this.gt(i)}gte_tolerance(e,t){const i=C(e);return this.eq_tolerance(i,t)||this.gt(i)}pLog10(){return this.lt(h.dZero)?h.dZero:this.log10()}absLog10(){return this.sign===0?h.dNaN:this.layer>0?z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):z(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?h.dNaN:this.layer>0?z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):z(this.sign,0,Math.log10(this.mag))}log(e){return e=C(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?h.dNaN:this.layer===0&&e.layer===0?z(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):h.div(this.log10(),e.log10())}log2(){return this.sign<=0?h.dNaN:this.layer===0?z(this.sign,0,Math.log2(this.mag)):this.layer===1?z(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?z(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?h.dNaN:this.layer===0?z(this.sign,0,Math.log(this.mag)):this.layer===1?z(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?z(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=C(e),i=this,r=t;if(i.sign===0)return r.eq(0)?W(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(r.sign===0)return W(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return i;const a=i.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?a.neg():Math.abs(r.toNumber()%2)%2===0?a:h.dNaN:a}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return h.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return z(1,0,t);if(e.sign===0)return h.dOne;e=W(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?z(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?z(-e.sign,e.layer+1,-e.mag):h.dOne}pow_base(e){return C(e).pow(this)}root(e){const t=C(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?h.exp(h.mul(this,h.ln(this).sub(1))):h.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(W(1,0,24)))return h.fromNumber(fa(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const i=e*e;let r=e,a=12*r,d=1/a,o=t+d;if(o===t||(t=o,r=r*i,a=360*r,d=1/a,o=t-d,o===t))return h.exp(t);t=o,r=r*i,a=1260*r;let c=1/a;return t=t+c,r=r*i,a=1680*r,c=1/a,t=t-c,h.exp(t)}else return this.layer===1?h.exp(h.mul(this,h.ln(this).sub(1))):h.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?h.dOne:this.layer===0&&this.mag<=709.7?h.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?z(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?z(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):z(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return h.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return z(1,2,Math.log10(this.mag)-.3010299956639812);{const e=h.div(W(this.sign,this.layer-1,this.mag),W(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=W(1,0,1)){if(e===1)return h.pow(this,t);if(e===0)return new h(t);if(this.eq(h.dOne))return h.dOne;if(this.eq(-1))return h.pow(this,t);if(e===Number.POSITIVE_INFINITY){const a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return h.fromNumber(Math.E);const d=h.ln(this).neg();return d.lambertw().div(d)}else return a>1.444667861009766?h.fromNumber(Number.POSITIVE_INFINITY):h.dNaN}if(this.eq(h.dZero)){let a=Math.abs((e+1)%2);return a>1&&(a=2-a),h.fromNumber(a)}if(e<0)return h.iteratedlog(t,this,-e);t=C(t);const i=e;e=Math.trunc(e);const r=i-e;if(this.gt(h.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let a=0;a<e;++a){const d=t;if(t=this.pow(t),d.eq(t))return t}if(r!=0){const a=this.pow(t);return t.mul(1-r).add(a.mul(r))}return t}r!==0&&(t.eq(h.dOne)?this.gt(10)?t=this.pow(r):(t=h.fromNumber(h.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return W(t.sign,t.layer+(e-a-1),t.mag);if(a>1e4)return t}return t}iteratedexp(e=2,t=W(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return h.tetrate(e,-t,this);e=C(e);let i=h.fromDecimal(this);const r=t;t=Math.trunc(t);const a=r-t;if(i.layer-e.layer>3){const d=Math.min(t,i.layer-e.layer-3);t-=d,i.layer-=d}for(let d=0;d<t;++d){if(i=i.log(e),!isFinite(i.layer)||!isFinite(i.mag))return i.normalize();if(d>1e4)return i}return a>0&&a<1&&(e.eq(10)?i=i.layeradd10(-a):i=i.layeradd(-a,e)),i}slog(e=10,t=100){let i=.001,r=!1,a=!1,d=this.slog_internal(e).toNumber();for(let o=1;o<t;++o){const p=new h(e).tetrate(d).gt(this);if(o>1&&a!=p&&(r=!0),a=p,r?i/=2:i*=2,i=Math.abs(i)*(p?-1:1),d+=i,i===0)break}return h.fromNumber(d)}slog_internal(e=10){if(e=C(e),e.lte(h.dZero)||e.eq(h.dOne))return h.dNaN;if(e.lt(h.dOne))return this.eq(h.dOne)?h.dZero:this.eq(h.dZero)?h.dNegOne:h.dNaN;if(this.mag<0||this.eq(h.dZero))return h.dNegOne;let t=0,i=h.fromDecimal(this);if(i.layer-e.layer>3){const r=i.layer-e.layer-3;t+=r,i.layer-=r}for(let r=0;r<100;++r)if(i.lt(h.dZero))i=h.pow(e,i),t-=1;else{if(i.lte(h.dOne))return h.fromNumber(t+h.slog_critical(e.toNumber(),i.toNumber()));t+=1,i=h.log(i,e)}return h.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:h.critical_section(e,t,da)}static tetrate_critical(e,t){return h.critical_section(e,t,ca)}static critical_section(e,t,i){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,a=0;for(let o=0;o<Ge.length;++o)if(Ge[o]==e){r=i[o][Math.floor(t)],a=i[o][Math.ceil(t)];break}else if(Ge[o]<e&&Ge[o+1]>e){const c=(e-Ge[o])/(Ge[o+1]-Ge[o]);r=i[o][Math.floor(t)]*(1-c)+i[o+1][Math.floor(t)]*c,a=i[o][Math.ceil(t)]*(1-c)+i[o+1][Math.ceil(t)]*c;break}const d=t-Math.floor(t);return r<=0||a<=0?r*(1-d)+a*d:Math.pow(e,Math.log(r)/Math.log(e)*(1-d)+Math.log(a)/Math.log(e)*d)}layeradd10(e){e=h.fromValue_noAlloc(e).toNumber();const t=h.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const i=Math.trunc(e);e-=i,t.layer+=i}if(e<=-1){const i=Math.trunc(e);if(e-=i,t.layer+=i,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?h.tetrate(t,r):Number.isFinite(r)?r>=-1?h.log(h.tetrate(t,r+1),t):h.log(h.log(h.tetrate(t,r+2),t),t):h.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return h.fromNumber(Pn(this.toNumber()));if(this.layer===0)return h.fromNumber(Pn(this.sign*this.mag));if(this.layer===1)return $n(this);if(this.layer===2)return $n(this);if(this.layer>=3)return W(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return W(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=W(1,0,1)){t=C(t);const i=e;e=Math.trunc(e);const r=i-e;r!==0&&(t.eq(h.dOne)?(++e,t=h.fromNumber(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(a>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.sin(this.sign*this.mag)):W(0,0,0)}cos(){return this.mag<0?h.dOne:this.layer===0?h.fromNumber(Math.cos(this.sign*this.mag)):W(0,0,0)}tan(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.tan(this.sign*this.mag)):W(0,0,0)}asin(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.asin(this.sign*this.mag)):W(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?h.fromNumber(Math.acos(this.toNumber())):this.layer===0?h.fromNumber(Math.acos(this.sign*this.mag)):W(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?h.fromNumber(Math.atan(this.sign*this.mag)):h.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return h.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return h.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?W(Number.NaN,Number.NaN,Number.NaN):h.ln(this.add(1).div(h.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(h.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};E(h,"dZero"),E(h,"dOne"),E(h,"dNegOne"),E(h,"dTwo"),E(h,"dTen"),E(h,"dNaN"),E(h,"dInf"),E(h,"dNegInf"),E(h,"dNumberMax"),E(h,"dNumberMin"),E(h,"fromStringCache",new ta(la));let l=h;l.dZero=W(0,0,0);l.dOne=W(1,0,1);l.dNegOne=W(-1,0,1);l.dTwo=W(1,0,2);l.dTen=W(1,0,10);l.dNaN=W(Number.NaN,Number.NaN,Number.NaN);l.dInf=W(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);l.dNegInf=W(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);l.dNumberMax=z(1,0,Number.MAX_VALUE);l.dNumberMin=z(1,0,Number.MIN_VALUE);C=l.fromValue_noAlloc;z=l.fromComponents;W=l.fromComponents_noNormalize;l.fromMantissaExponent;l.fromMantissaExponent_noNormalize;const ga=new l(1),Jn=new l(.98),Yn=new l(0),an=[new l(1),new l(1e3),new l(1e6),new l(1e9),new l(1e12),new l(1e33),new l(1e100),new l(1e303),new l("1e1000")];function de(n,e,t,i=s(N,null,null)){e==null&&(e=H.defaultDecimalsShown);const r=i==="";return e<0&&(e=0),window.settings.insanePrecision&&(e*=window.settings.precisionBonus/2+1),window.settings.blindNumbers?r?"":s(N,null,null):window.settings.yesnoNumbers?r?l.neq(n,0)?"YES":"NO":s(N,null,[l.neq(n,0)?"YES":"NO"]):(t=t??H.defaultShowSmall,n=new l(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)?r?"NaN":s(N,null,[g("NaN")]):n.sign<0?r?"-"+He(n.neg(),e):s(N,null,[g("-"),de(n.neg(),e)]):n.mag===Number.POSITIVE_INFINITY?r?"Infinity":s(N,null,[g("Infinity")]):n.gte(an[window.settings.logarithmicThreshold])?r?window.settings.infinityNumbers?ti(n,e):Xn(n,e):window.settings.infinityNumbers?s(N,null,[ei(n,e)]):s(N,null,[Zn(n,e)]):n.gte(an[window.settings.scientificThreshold])?r?vn(n,e):s(N,null,[pn(n,e)]):n.gte(an[window.settings.standardThreshold])?r?window.settings.letterNumbers?on(n,e):ii(n,e):window.settings.letterNumbers?s(N,null,[on(n,e)]):s(N,null,[ni(n,e)]):n.gte(1e4)?r?Tt(n,0):s(N,null,[Tt(n,0)]):(n.gte(1e3)&&e--,n.gte(100)&&e--,e=Math.max(e,0),r?ln(n,e):s(N,null,[ln(n,e)])))}function He(n,e,t){return de(n,e,t,"").toString()}function ma(n,e){return s(N,null,[de(n,e,!0)])}function pa(n,e){return He(n,e,!0)}function Z(n){return n=new l(n),n.sign<0?s(N,null,[g("-"),Z(n.neg())]):n.gte(1e9)?s(N,null,[de(n)]):n.lte(Jn)&&!n.eq(Yn)?s(N,null,[de(n)]):s(N,null,[de(n,0)])}function mn(n){return n=new l(n),n.sign<0?"-"+mn(n.neg()):n.gte(1e9)||n.lte(Jn)&&!n.eq(Yn)?He(n):He(n,0)}function Kn(n,e=!1){return window.settings.blindNumbers?s(N,null,null):window.settings.yesnoNumbers?l.neq(n,0)?s(N,null,[g("YES")]):s(N,null,[g("NO")]):l.lt(n,0)?s(N,null,[g("-"),Kn(l.neg(n))]):l.gt(n,2**51)?s(N,null,[de(l.div(n,31536e3)),g("y")]):(n=new l(n).toNumber(),n<60?s(N,null,[de(n),g("s")]):n<3600?e?s(N,null,[Z(Math.floor(n/60)),g(":"),n%60<10?"0":"",de(n%60)]):s(N,null,[Z(Math.floor(n/60)),g("mÂ "),de(n%60),g("s")]):n<86400?e?s(N,null,[Z(Math.floor(n/3600)),g(":"),n/60%60<10?"0":"",Z(Math.floor(n/60)%60),g(":"),n%60<10?"0":"",de(n%60)]):s(N,null,[Z(Math.floor(n/3600)),g("hÂ "),Z(Math.floor(n/60)%60),g("mÂ "),Z(n%60),g("s")]):n<31536e3?e?s(N,null,[Z(Math.floor(n/84600)%365),g("dÂ "),n/3600%24<10?"0":"",Z(Math.floor(n/3600)%24),g(":"),n/60%60<10?"0":"",Z(Math.floor(n/60)%60),g(":"),n%60<10?"0":"",de(n%60)]):s(N,null,[Z(Math.floor(n/84600)%365),g("dÂ "),Z(Math.floor(n/3600)%24),g("hÂ "),Z(Math.floor(n/60)%60),g("m")]):e?s(N,null,[Z(Math.floor(n/31536e3)),g("yÂ "),n/84600%365<100?"0":"",n/84600%365<10?"0":"",Z(Math.floor(n/84600)%365),g("dÂ "),n/3600%24<10?"0":"",Z(Math.floor(n/3600)%24),g(":"),n/60%60<10?"0":"",Z(Math.floor(n/60)%60),g(":"),n%60<10?"0":"",de(n%60)]):s(N,null,[Z(Math.floor(n/31536e3)),g("yÂ "),Z(Math.floor(n/84600)%365),g("dÂ "),Z(Math.floor(n/3600)%24),g("h")]))}function Zn(n,e=2){const t=l.log10(n);return s(N,null,[g("e"),de(t.mul(10**e).trunc().div(10**e))])}function Xn(n,e=2){const t=l.log10(n);return"e"+He(t.mul(10**e).trunc().div(10**e))}function ei(n,e=2,t=Number.POSITIVE_INFINITY){const i=l.log(n,t);return s(N,null,[de(i.mul(10**e).trunc().div(10**e)),g("â")])}function ti(n,e=2,t=Number.POSITIVE_INFINITY){const i=l.log(n,t);return de(i.mul(10**e).trunc().div(10**e))+"â"}function pn(n,e=2){let t=l.log10(n).floor();return window.settings.engineering&&(t=t.div(3),e-=t.mul(3).sub(t.floor().mul(3)).toNumber(),t=t.floor().mul(3)),n=l.div(n,l.pow(10,t)),n=n.mul(10**e).trunc().div(10**e),s(N,null,[n.toStringWithDecimalPlaces(e),g("e"),Z(t)])}function vn(n,e=2){let t=l.log10(n).floor();return window.settings.engineering&&(t=t.div(3),e-=t.mul(3).sub(t.floor().mul(3)).toNumber(),t=t.floor().mul(3)),n=l.div(n,l.pow(10,t)),n=n.mul(10**e).trunc().div(10**e),n.toStringWithDecimalPlaces(e)+"e"+mn(t)}const Mt=["K","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc","UDc","DDc","TDc","QaDc","QiDc","SxDc","SpDc","OcDc","NoDc","Vg","UVg","DVg","TVg","QaVg","QiVg","SxVg","SpVg","OcVg","NoVg","Tg","UTg","DTg","TTg","QaTg","QiTg","SxTg","SpTg","OcTg","NoTg","Qg","UQg","DQg","TQg","QaQg","QiQg","SxQg","SpQg","OcQg","NoQg","Qt","UQt","DQt","TQt","QaQt","QiQt","SxQt","SpQt","OcQt","NoQt","Se","USe","DSe","TSe","QaSe","QiSe","SxSe","SpSe","OcSe","NoSe","Sg","USg","DSg","TSg","QaSg","QiSg","SxSg","SpSg","OcSg","NoSg","Og","UOg","DOg","TOg","QaOg","QiOg","SxOg","SpOg","OcOg","NoOg","Nn","UNn","DNn","TNn","QaNn","QiNn","SxNn","SpNn","OcNn","NoNn","Ce","UCe"];function ni(n,e=2){if(l.gte(n,l.pow(1e3,Mt.length)))return pn(n,e);const t=l.log(n,1e3).floor().toNumber()-1;return n=l.div(n,l.pow(1e3,t+1)),n=n.mul(10**(e-n.log10().floor().toNumber()+1)).trunc().div(10**(e-n.log10().floor().toNumber()+1)),n.toStringWithDecimalPlaces(e-n.log10().floor().toNumber()+1)+" "+Mt[t]}function ii(n,e=2){if(l.gte(n,l.pow(1e3,Mt.length)))return vn(n,e);const t=l.log(n,1e3).floor().toNumber()-1;return n=l.div(n,l.pow(1e3,t+1)),n=n.mul(10**(e-n.log10().floor().toNumber()+1)).trunc().div(10**(e-n.log10().floor().toNumber()+1)),n.toStringWithDecimalPlaces(e-n.log10().floor().toNumber()+1)+" "+Mt[t]}function on(n,e=2,t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i=1e3){t=window.settings.letters.length<2?t:Array.from(window.settings.letters);const r=l.log(n,i).floor().toNumber();let a="",d=r;for(;d>0;)a=t[(d-1)%t.length]+a,d=Math.floor((d-1)/t.length);return n=l.div(n,l.pow(i,r)),n=n.mul(10**(e-n.log10().floor().toNumber()+1)).trunc().div(10**(e-n.log10().floor().toNumber()+1)),n.toStringWithDecimalPlaces(e-n.log10().floor().toNumber()+1)+" "+a}function va(n,e,t=!0){let i=l.log10(n).floor(),r=l.div(n,l.pow(10,i));r.toStringWithDecimalPlaces(e)==="10"&&(r=ga,i=i.add(1));const a=i.gte(1e9)?de(i,Math.max(Math.max(e,3),H.defaultDecimalsShown)):i.gte(1e4)?Tt(i,0):i.toStringWithDecimalPlaces(0);return t?r.toStringWithDecimalPlaces(e)+"e"+a:"e"+a}function Tt(n,e){if(n==null)return"NaN";if(n=new l(n),n.mag<.001)return 0 .toFixed(e);const i=n.toStringWithDecimalPlaces(e).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length===1?i[0]:i[0]+"."+i[1]}function ln(n,e){return n==null?"NaN":(n=new l(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),H.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}function ha(n,e,t){n=new l(n);let i=n.toStringWithDecimalPlaces(e);return n.gte(t)&&(i=l.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),i}function ba(n){let e=l.log10(n).ceil();const t=l.div(n,l.pow(10,e));return e=e.neg(),n=new l(10).pow(e).times(t),n}const ya=Object.freeze(Object.defineProperty({__proto__:null,format:de,formatCom:Tt,formatExp:va,formatInf:ei,formatLet:on,formatLog:Zn,formatReg:ln,formatSci:pn,formatSmall:ma,formatStan:ni,formatTime:Kn,formatWhole:Z,invertOOM:ba,stringyFormat:He,stringyFormatInf:ti,stringyFormatLog:Xn,stringyFormatSci:vn,stringyFormatSmall:pa,stringyFormatStan:ii,stringyFormatWhole:mn,toPlaces:ha},Symbol.toStringTag,{value:"Module"})),{formatExp:wa,formatCom:Na,formatReg:Ca,format:ae,formatWhole:ce,formatTime:hn,toPlaces:Sa,formatSmall:Dt,invertOOM:ka,formatInf:Lc,formatLet:qc,formatLog:Uc,formatSci:Bc,formatStan:zc,formatExp:Gc,formatCom:jc,formatReg:Hc,stringyFormat:Vn,stringyFormatInf:Wc,stringyFormatLog:Qc,stringyFormatSci:Jc,stringyFormatStan:Yc,stringyFormatSmall:Kc,stringyFormatWhole:Zc}=ya;window.Decimal=l;window.exponentialFormat=wa;window.commaFormat=Na;window.regularFormat=Ca;window.format=ae;window.formatWhole=ce;window.formatTime=hn;window.toPlaces=Sa;window.formatSmall=Dt;window.invertOOM=ka;const ri=l.ln(10);function Ct(n){return n}function ut(n,...e){const t=e.find(i=>P(i));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function xa(n,e){return P(e)?e.invert(l.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ia(n,e){return P(e)?e.isIntegrable()?f.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function Ma(n){return f.neg(n)}function Ta(n,e,t){return P(e)?e.invert(l.sub(n,se(t))):P(t)?t.invert(l.sub(n,se(e))):(console.error("Could not invert due to no input being a variable"),0)}function Pa(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.times(t,e.innermostVariable??0).add(i)}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n);return f.times(e,t.innermostVariable??0).add(i)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function $a(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.add(i,t)}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n);return f.add(i,e)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Va(n,e,t){return P(e)?e.invert(l.add(n,se(t))):P(t)?t.invert(l.sub(se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Fa(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.sub(i,f.times(t,e.innermostVariable??0))}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n);return f.times(e,t.innermostVariable??0).sub(i)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Aa(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.sub(i,t)}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n);return f.sub(i,e)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ea(n,e,t){return P(e)?e.invert(l.div(n,se(t))):P(t)?t.invert(l.div(n,se(e))):(console.error("Could not invert due to no input being a variable"),0)}function Oa(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.times(i,t)}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n);return f.times(i,e)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function _a(n,e,t){return P(e)?f.div(n,t):P(t)?f.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),f.constant(0))}function Da(n,e,t){return P(e)?e.invert(l.mul(n,se(t))):P(t)?t.invert(l.div(se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Ra(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.div(i,t)}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n);return f.div(e,i)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function La(n,e,t){return P(e)?f.mul(n,t):P(t)?f.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),f.constant(0))}function qa(n,e){return P(e)?e.invert(l.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ua(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.ln(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ba(n,e){return P(e)?e.invert(l.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function za(n){return l.ln(n).sub(1).times(n).div(ri)}function Ga(n,e){if(P(e)){const t=ri.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function ja(n,e){return P(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n)],evaluate:za,invert:Ga}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function Ha(n,e,t){return P(e)?e.invert(l.pow(se(t),n)):P(t)?t.invert(l.root(se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function Wa(n,e){return l.ln(n).sub(1).times(n).div(l.ln(e))}function Qa(n,e,t){if(P(e)){const i=l.ln(se(t)).times(n);return e.invert(i.div(i.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Ja(n,e,t){return P(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n),t],evaluate:Wa,invert:Qa}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function Ya(n,e){return P(e)?e.invert(l.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function Ka(n){return l.ln(n).sub(1).times(n).div(l.ln(2))}function Za(n,e){if(P(e)){const t=l.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Xa(n,e){return P(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n)],evaluate:Ka,invert:Za}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function es(n,e){return P(e)?e.invert(l.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function ts(n){return l.ln(n).sub(1).times(n)}function ns(n,e){return P(e)?e.invert(l.div(n,l.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function is(n,e){return P(e)?e.isIntegrable()?new f({inputs:[e.getIntegralFormula(n)],evaluate:ts,invert:ns}):(console.error("Could not integrate due to variable not being integrable"),f.constant(0)):(console.error("Could not integrate due to no input being a variable"),f.constant(0))}function rs(n,e,t){return P(e)?e.invert(l.root(n,se(t))):P(t)?t.invert(l.ln(n).div(l.ln(se(e)))):(console.error("Could not invert due to no input being a variable"),0)}function as(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n),r=f.add(t,1);return f.pow(i,r).div(r)}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n);return f.pow(e,i).div(f.ln(e))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function ss(n,e){return P(e)?e.invert(l.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function os(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.pow10(t).div(f.ln(10))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function ls(n,e,t){return P(e)?e.invert(l.ln(n).div(l.ln(se(t)))):P(t)?t.invert(l.root(se(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function us(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.pow(t,i).div(f.ln(t))}else if(P(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=t.getIntegralFormula(n),r=f.add(e,1);return f.pow(i,r).div(r)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function cs(n,e,t){return P(e)?e.invert(l.root(n,l.recip(se(t)))):P(t)?t.invert(l.ln(se(e)).div(l.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function ds(n,e,t){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const i=e.getIntegralFormula(n);return f.pow(i,f.recip(t).add(1)).times(t).div(f.add(t,1))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function fs(n,e){return P(e)?e.invert(l.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function gs(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.exp(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function ms(n,e=2,t=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(e,1e308).toNumber();return l.tetrate(n,i,t)}function ps(n,e,t,i){return P(e)?e.invert(l.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function vs(n,e=2,t=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(e,1e308).toNumber();return l.iteratedexp(n,i,new l(t))}function hs(n,e,t,i){return P(e)?e.invert(l.iteratedlog(n,Math.E,l.minabs(1e308,se(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function bs(n,e=10,t=2){const i=l.minabs(t,1e308).toNumber();return l.iteratedlog(n,e,i)}function ys(n,e=10){const t=l.minabs(e,1e308).toNumber();return l.slog(n,t)}function ws(n,e,t){return P(e)?e.invert(l.tetrate(n,l.minabs(1e308,se(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Ns(n,e,t){const i=l.minabs(e,1e308).toNumber();return l.layeradd(n,i,t)}function Cs(n,e,t,i){return P(e)?e.invert(l.layeradd(n,l.minabs(1e308,se(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Ss(n,e){return P(e)?e.invert(l.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function ks(n,e){return P(e)?e.invert(l.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function xs(n,e,t){const i=l.minabs(e,1e308).toNumber();return l.pentate(n,i,t)}function Is(n,e){return P(e)?e.invert(l.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ms(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Ts(n,e){return P(e)?e.invert(l.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ps(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.sin(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function $s(n,e){return P(e)?e.invert(l.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function Vs(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Fs(n,e){return P(e)?e.invert(l.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function As(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.asin(t).times(t).add(f.sqrt(f.sub(1,f.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Es(n,e){return P(e)?e.invert(l.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function Os(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.acos(t).times(t).sub(f.sqrt(f.sub(1,f.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function _s(n,e){return P(e)?e.invert(l.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ds(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.atan(t).times(t).sub(f.ln(f.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Rs(n,e){return P(e)?e.invert(l.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ls(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cosh(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function qs(n,e){return P(e)?e.invert(l.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Us(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.sinh(t)}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Bs(n,e){return P(e)?e.invert(l.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function zs(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Gs(n,e){return P(e)?e.invert(l.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function js(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.asinh(t).times(t).sub(f.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Hs(n,e){return P(e)?e.invert(l.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ws(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.acosh(t).times(t).sub(f.add(t,1).sqrt().times(f.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Qs(n,e){return P(e)?e.invert(l.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Js(n,e){if(P(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),f.constant(0);const t=e.getIntegralFormula(n);return f.atanh(t).times(t).add(f.sub(1,f.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),f.constant(0)}function Xe(n){return(e,t)=>new f({inputs:[e,t],evaluate:n,invert:Ct})}function P(n){return n instanceof gt&&n.hasVariable()}function se(n,e){return n instanceof gt?n.evaluate(e):u(n)}function Ys(){return f.pow(this,2).div(2)}function Ks(){return this}const B=class B{constructor(e){E(this,"inputs");E(this,"internalEvaluate");E(this,"internalInvert");E(this,"internalIntegrate");E(this,"internalIntegrateInner");E(this,"applySubstitution");E(this,"description");E(this,"internalVariables");E(this,"innermostVariable");E(this,"negate",this.neg);E(this,"negated",this.neg);E(this,"sgn",this.sign);E(this,"plus",this.add);E(this,"subtract",this.sub);E(this,"minus",this.sub);E(this,"multiply",this.mul);E(this,"times",this.mul);E(this,"divide",this.div);E(this,"divideBy",this.div);E(this,"dividedBy",this.div);E(this,"reciprocal",this.recip);E(this,"reciprocate",this.recip);E(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(i=>typeof i=="object"&&ke in i?i[ke]:i)),"variable"in e?(typeof e.variable=="object"&&ke in e.variable&&(e.variable=e.variable[ke]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Ys,internalIntegrateInner:Ks,applySubstitution:Ct}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:i,invert:r,integrate:a,integrateInner:d,applySubstitution:o}=e,c=t.reduce((v,S)=>v+(S instanceof B?S.internalVariables:0),0),p=t.find(v=>v instanceof B&&v.hasVariable()),y=c===1?p==null?void 0:p.innermostVariable:void 0,b=(p==null?void 0:p.isInvertible())??!1,w=(p==null?void 0:p.isIntegrable())??!1;return{inputs:t,internalEvaluate:i,internalInvert:b?r:void 0,internalIntegrate:w?a:void 0,internalIntegrateInner:d,applySubstitution:o,innermostVariable:y,internalVariables:c}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>se(i,e))))??(this.hasVariable()?e:null)??se(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,i)=>t instanceof B&&e.inputs[i]instanceof B?t.equals(e.inputs[i]):!(t instanceof B)&&!(e.inputs[i]instanceof B)&&l.eq(u(t),u(e.inputs[i])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new f({inputs:[e]})}static variable(e){return new f({variable:e})}static stringify(e){return e instanceof B?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":Vn(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(f.stringify).join(", ")})`:Vn(u(e))}static step(e,t,i){const r=i(f.variable(0)),a=D(t);function d(c){return l.lt(c,u(a))?c:l.add(r.evaluate(l.sub(c,u(a))),u(a))}function o(c,p){return P(p)&&r.isInvertible()?(l.gt(c,u(a))&&(c=l.add(r.invert(l.sub(c,u(a))),u(a))),p.invert(c)):(console.error("Could not invert due to no input being a variable"),0)}return new f({inputs:[e],evaluate:d,invert:r.isInvertible()&&r.hasVariable()?o:void 0,description:"indeterminate"})}static if(e,t,i,r){const a=R(0),d=f.variable(a),o=i(d),c=r==null?void 0:r(d),p=D(t);function y(w){return u(p)?(a.value=w,o.evaluate()):c?(a.value=w,c.evaluate()):w}function b(w,v){return!P(v)||!o.isInvertible()||c!=null&&!c.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):u(p)?v.invert(o.invert(w)):c?v.invert(c.invert(w)):v.invert(w)}return new f({inputs:[e],evaluate:y,invert:o.isInvertible()&&o.hasVariable()?b:void 0,description:"indeterminate"})}static conditional(e,t,i,r){return f.if(e,t,i,r)}static abs(e){return new f({inputs:[e],evaluate:l.abs})}static neg(e){return new f({inputs:[e],evaluate:l.neg,invert:xa,applySubstitution:Ma,integrate:Ia})}static sign(e){return new f({inputs:[e],evaluate:l.sign})}static round(e){return new f({inputs:[e],evaluate:l.round,invert:ut})}static floor(e){return new f({inputs:[e],evaluate:l.floor,invert:ut})}static ceil(e){return new f({inputs:[e],evaluate:l.ceil,invert:ut})}static trunc(e){return new f({inputs:[e],evaluate:l.trunc,invert:ut})}static add(e,t){return new f({inputs:[e,t],evaluate:l.add,invert:Ta,integrate:Pa,integrateInner:$a,applySubstitution:Ct})}static sub(e,t){return new f({inputs:[e,t],evaluate:l.sub,invert:Va,integrate:Fa,integrateInner:Aa,applySubstitution:Ct})}static mul(e,t){return new f({inputs:[e,t],evaluate:l.mul,invert:Ea,integrate:Oa,applySubstitution:_a})}static div(e,t){return new f({inputs:[e,t],evaluate:l.div,invert:Da,integrate:Ra,applySubstitution:La})}static recip(e){return new f({inputs:[e],evaluate:l.recip,invert:qa,integrate:Ua})}static clamp(e,t,i){return new f({inputs:[e,t,i],evaluate:l.clamp,invert:ut})}static pLog10(e){return new f({inputs:[e],evaluate:l.pLog10})}static absLog10(e){return new f({inputs:[e],evaluate:l.absLog10})}static log10(e){return new f({inputs:[e],evaluate:l.log10,invert:Ba,integrate:ja})}static log(e,t){return new f({inputs:[e,t],evaluate:l.log,invert:Ha,integrate:Ja})}static log2(e){return new f({inputs:[e],evaluate:l.log2,invert:Ya,integrate:Xa})}static ln(e){return new f({inputs:[e],evaluate:l.ln,invert:es,integrate:is})}static pow(e,t){return new f({inputs:[e,t],evaluate:l.pow,invert:rs,integrate:as})}static pow10(e){return new f({inputs:[e],evaluate:l.pow10,invert:ss,integrate:os})}static pow_base(e,t){return new f({inputs:[e,t],evaluate:l.pow_base,invert:ls,integrate:us})}static root(e,t){return new f({inputs:[e,t],evaluate:l.root,invert:cs,integrate:ds})}static factorial(e){return new f({inputs:[e],evaluate:l.factorial})}static gamma(e){return new f({inputs:[e],evaluate:l.gamma})}static lngamma(e){return new f({inputs:[e],evaluate:l.lngamma})}static exp(e){return new f({inputs:[e],evaluate:l.exp,invert:fs,integrate:gs})}static sqr(e){return f.pow(e,2)}static sqrt(e){return f.root(e,2)}static cube(e){return f.pow(e,3)}static cbrt(e){return f.root(e,3)}static tetrate(e,t=2,i=l.fromComponents_noNormalize(1,0,1)){return new f({inputs:[e,t,i],evaluate:ms,invert:ps})}static iteratedexp(e,t=2,i=l.fromComponents_noNormalize(1,0,1)){return new f({inputs:[e,t,i],evaluate:vs,invert:hs})}static iteratedlog(e,t=10,i=1){return new f({inputs:[e,t,i],evaluate:bs})}static slog(e,t=10){return new f({inputs:[e,t],evaluate:ys,invert:ws})}static layeradd10(e,t){return new f({inputs:[e,t],evaluate:l.layeradd10})}static layeradd(e,t,i=10){return new f({inputs:[e,t,i],evaluate:Ns,invert:Cs})}static lambertw(e){return new f({inputs:[e],evaluate:l.lambertw,invert:Ss})}static ssqrt(e){return new f({inputs:[e],evaluate:l.ssqrt,invert:ks})}static pentate(e,t=2,i=l.fromComponents_noNormalize(1,0,1)){return new f({inputs:[e,t,i],evaluate:xs})}static sin(e){return new f({inputs:[e],evaluate:l.sin,invert:Fs,integrate:Ms})}static cos(e){return new f({inputs:[e],evaluate:l.cos,invert:Es,integrate:Ps})}static tan(e){return new f({inputs:[e],evaluate:l.tan,invert:_s,integrate:Vs})}static asin(e){return new f({inputs:[e],evaluate:l.asin,invert:Is,integrate:As})}static acos(e){return new f({inputs:[e],evaluate:l.acos,invert:Ts,integrate:Os})}static atan(e){return new f({inputs:[e],evaluate:l.atan,invert:$s,integrate:Ds})}static sinh(e){return new f({inputs:[e],evaluate:l.sinh,invert:Gs,integrate:Ls})}static cosh(e){return new f({inputs:[e],evaluate:l.cosh,invert:Hs,integrate:Us})}static tanh(e){return new f({inputs:[e],evaluate:l.tanh,invert:Qs,integrate:zs})}static asinh(e){return new f({inputs:[e],evaluate:l.asinh,invert:Rs,integrate:js})}static acosh(e){return new f({inputs:[e],evaluate:l.acosh,invert:qs,integrate:Ws})}static atanh(e){return new f({inputs:[e],evaluate:l.atanh,invert:Bs,integrate:Js})}stringify(){return f.stringify(this)}step(e,t){return f.step(this,e,t)}if(e,t){return f.if(this,e,t)}conditional(e,t){return f.if(this,e,t)}abs(){return f.abs(this)}neg(){return f.neg(this)}sign(){return f.sign(this)}round(){return f.round(this)}floor(){return f.floor(this)}ceil(){return f.ceil(this)}trunc(){return f.trunc(this)}add(e){return f.add(this,e)}sub(e){return f.sub(this,e)}mul(e){return f.mul(this,e)}div(e){return f.div(this,e)}recip(){return f.recip(this)}max(e){return f.max(this,e)}min(e){return f.min(this,e)}maxabs(e){return f.maxabs(this,e)}minabs(e){return f.minabs(this,e)}clamp(e,t){return f.clamp(this,e,t)}clampMin(e){return f.clampMin(this,e)}clampMax(e){return f.clampMax(this,e)}pLog10(){return f.pLog10(this)}absLog10(){return f.absLog10(this)}log10(){return f.log10(this)}log(e){return f.log(this,e)}log2(){return f.log2(this)}ln(){return f.ln(this)}pow(e){return f.pow(this,e)}pow10(){return f.pow10(this)}pow_base(e){return f.pow_base(this,e)}root(e){return f.root(this,e)}factorial(){return f.factorial(this)}gamma(){return f.gamma(this)}lngamma(){return f.lngamma(this)}exp(){return f.exp(this)}sqr(){return f.pow(this,2)}sqrt(){return f.root(this,2)}cube(){return f.pow(this,3)}cbrt(){return f.root(this,3)}tetrate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return f.tetrate(this,e,t)}iteratedexp(e=2,t=l.fromComponents_noNormalize(1,0,1)){return f.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return f.iteratedlog(this,e,t)}slog(e=10){return f.slog(this,e)}layeradd10(e){return f.layeradd10(this,e)}layeradd(e,t){return f.layeradd(this,e,t)}lambertw(){return f.lambertw(this)}ssqrt(){return f.ssqrt(this)}pentate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return f.pentate(this,e,t)}sin(){return f.sin(this)}cos(){return f.cos(this)}tan(){return f.tan(this)}asin(){return f.asin(this)}acos(){return f.acos(this)}atan(){return f.atan(this)}sinh(){return f.sinh(this)}cosh(){return f.cosh(this)}tanh(){return f.tanh(this)}asinh(){return f.asinh(this)}acosh(){return f.acosh(this)}atanh(){return f.atanh(this)}};E(B,"negate",B.neg),E(B,"negated",B.neg),E(B,"sgn",B.sign),E(B,"plus",B.add),E(B,"subtract",B.sub),E(B,"minus",B.sub),E(B,"multiply",B.mul),E(B,"times",B.mul),E(B,"divide",B.div),E(B,"divideBy",B.div),E(B,"dividedBy",B.div),E(B,"reciprocal",B.recip),E(B,"reciprocate",B.recip),E(B,"max",Xe(l.max)),E(B,"min",Xe(l.min)),E(B,"minabs",Xe(l.minabs)),E(B,"maxabs",Xe(l.maxabs)),E(B,"clampMin",Xe(l.clampMin)),E(B,"clampMax",Xe(l.clampMax)),E(B,"logarithm",B.log);let gt=B;class f extends gt{constructor(){super(...arguments);E(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),i=l.add(this.evaluate(0),this.evaluate(1)).div(2);return l.sub(i,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),f.constant(0);let i=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(r=>i=r(i)),this.integralFormula=i}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),f.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),f.constant(0)):(t.push(i=>this.applySubstitution.call(this,i,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),f.constant(0)))}}function Zs(n,e,t=!0,i,r=l.dInf){const a=D(t),d=D(i),o=D(r);return F(()=>{const c=u(o);if(l.eq(c,1))return l.gte(e.value,n.evaluate())?l.dOne:l.dZero;const p=u(a),y=u(d)??(p?10:0);let b=0;if(l.gt(c,y)){if(!n.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(p){if(!n.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;b=l.floor(n.invertIntegral(l.add(e.value,n.evaluateIntegral()))).sub(u(n.innermostVariable)??0)}else b=l.floor(n.invert(e.value))}if(b=l.clampMax(b,c),y>0){const w=b;b=l.sub(b,y).clampMin(0);let v;for(p?v=St(n,b,!0,0):v=n.evaluate(l.add(u(n.innermostVariable)??0,b));l.lt(b,c)&&l.lt(b,Number.MAX_SAFE_INTEGER)&&l.add(w,1).gte(b);){const S=n.evaluate(b.add(u(n.innermostVariable)??0));if(l.add(v,S).lte(e.value))b=b.add(1),v=l.add(v,S);else break}}return b})}function St(n,e,t=!0,i){if(l.eq(e,1))return n.evaluate();const r=u(n.innermostVariable)??0;let a=l.add(e,r);const d=a;i??(i=t?10:0),a=a.sub(i).clampMin(r);let o=0;if(l.gt(e,i)){if(!n.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(t){if(!n.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(o=l.sub(n.evaluateIntegral(a),n.evaluateIntegral()),d.gt(1e308))return l.add(o,l.sub(d,a).times(n.evaluate(a)))}else if(o=n.evaluate(a),a=a.add(1),d.gt(1e308))return l.sub(d,a).add(1).times(o)}for(let c=a.toNumber();c<d.toNumber();c++)o=l.add(o,n.evaluate(c));return o}const qe=Symbol("PersistentState"),Ue=Symbol("DefaultValue"),Pt=Symbol("StackTrace"),$t=Symbol("Deleted"),ke=Symbol("NonPersistent"),je=Symbol("SaveDataPath"),at=Symbol("SkipPersistence");function Xs(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function Fn(n,e){var t;l.isNaN(e)&&(Y.hasNaN||($.autosave=!1,Y.hasNaN=!0,Y.NaNPath=n[je],Y.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[je])==null?void 0:t.join(".")}`)),n[qe].value=e}function Me(n,e=!0){const t=re(n)?n:R(n);re(n)&&(n=n.value);const i=F({get(){return t.value},set(a){e?Fn(r,a):r[qe].value=a}});i[Ue]=n;const r={get value(){return t.value},set value(a){e?Fn(r,a):r[qe].value=a},__v_isRef:!0,[qe]:t,[Ue]:n,[Pt]:Xs(),[$t]:!1,[ke]:i,[je]:void 0};return we.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",r,`
Created at:
`+r[Pt]):nt[we[we.length-1]].add(r),r}function eo(n){return n!=null&&typeof n=="object"&&qe in n}function ve(n){return!(tt in n)&&ke in n?n[ke]:new Proxy(n,{get(e,t){if(t!==qe)return t===at?!0:e[t]},set(e,t,i){return e[t]=i,!0},has(e,t){return t===qe?!1:t===at?!0:Reflect.has(e,t)}})}function ai(n){we.length===0?console.warn("Deleting a persistent ref outside of a layer. Ignoring...",n):nt[we[we.length-1]].delete(n),n[$t]=!0}oe.on("addLayer",(n,e)=>{const t=[],i=(r,a=[])=>{let d=!1;return Object.keys(r).forEach(o=>{let c=r[o];if(c!=null&&typeof c=="object"){if(at in c&&c[at]===!0)return;if(tt in c&&(c=c[tt]),eo(c)){if(d=!0,c[$t]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[Pt]);return}nt[n.id].delete(c);const p=[n.id,...a,o];c[je]!=null&&JSON.stringify(p)!==JSON.stringify(c[je])&&console.error(`Persistent ref is being saved to \`${p.join(".")}\` when it's already present at \`${c[je].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),c[je]=p;const y=a.reduce((w,v)=>(v in w||(w[v]={}),w[v]),e),b=y[o];y[o]=c[qe],Yi(y)?b!=null?y[o]=b:y[o]=c[Ue]:b!=null?y[o].value=b:y[o].value=c[Ue]}else!(c instanceof l)&&!(c instanceof f)&&!re(c)&&!t.includes(c)&&(typeof c.type=="symbol"&&t.push(c),i(c,[...a,o])&&(Array.isArray(c)&&!Array.isArray(r)||(d=!0)))}}),d};i(n[tt]),nt[n.id].forEach(r=>{r[$t]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+r[Pt])}),nt[n.id].clear()});function bn(n,e="points",t=0,i=void 0){const r=re(n)?n:Me(n);if(r.displayName=e,r.precision=t,r.small=i,!re(n)){const a=r[ke];a.displayName=e,a.precision=t,a.small=i}return r}function si(n){const e=Me(n.value);return be(n,t=>{qt.value||l.gt(t,e.value)&&(e.value=t)}),e}function oi(n){const e=Me(n.value);return be(n,(t,i)=>{qt.value||l.gt(t,i)&&(e.value=l.add(e.value,l.sub(t,i)))}),e}const to=new l("10^^8"),no=new l("1e100");function li(n,e){const t=R(0),i=R(0),r=R(0);oe.on("update",d=>{if(i.value=0,l.lte(n.value,no)){r.value=n.value;return}let o=n.value,c=r.value;if(r.value=o,l.gt(o,c))if(l.gte(o,to))o=l.slog(o,1e10),c=l.slog(c,1e10),t.value=o.sub(c).div(d),i.value=-1;else for(;l.div(o,c).log(10).div(d).gte("100")&&i.value<=5&&l.gt(c,0);)o=l.log10(o),c=l.log10(c),t.value=o.sub(c).div(d),i.value++});function a(){return i.value===0?e?s(N,null,[ae(e.value,2,n.small),g("Â "),n.displayName,g("/s")]):s(N,null,null):s(N,null,[ae(t.value),g(" OOM"),i.value<0?"^OOM":"^"+i.value,g("s/sec")])}return a}function st(n,e){const t=e??n.value;return l.eq(n.precision,0)?ce(n.small?t:l.floor(t)):s(N,null,[ae(t,n.precision,n.small)])}const io={class:"table"},ui=J({__name:"Column",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=F(()=>_t[L.theme].mergeAdjacent&&e.dontMerge!==!0);return(i,r)=>(k(),T("div",io,[m("div",{class:ee(["col",{mergeAdjacent:t.value}])},[Ce(i.$slots,"default")],2)]))}}),ro={class:"table"},ao=J({__name:"Row",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=F(()=>_t[L.theme].mergeAdjacent&&e.dontMerge!==!0);return(i,r)=>(k(),T("div",ro,[m("div",{class:ee(["row",{mergeAdjacent:t.value}])},[Ce(i.$slots,"default")],2)]))}});let so=0;function oo(n="feature-"){return n+so++}var ht=(n=>(n[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.None=2]="None",n))(ht||{});function Rt(n){const e=u(n);return e!==2&&e!==!1}function lo(n){return u(n)===1}function ci(n,...e){const t=[],i=r=>{Object.keys(r).forEach(a=>{const d=r[a];d!=null&&typeof d=="object"&&d.__v_isVNode!==!0&&(e.includes(d.type)?t.push(d):!(d instanceof l)&&!re(d)&&i(d))})};return i(n),t}const uo=J({__name:"Node",props:{id:{}},setup(n){const e=n,t=xt(Gn,()=>{}),i=xt(jn,()=>{}),r=Ot(null),a=F(()=>r.value&&r.value.parentElement);return be([a,Ye(e,"id")],([d,o],[c,p])=>{c&&i(u(p)),d&&t(o,d)}),Dn(()=>i(e.id)),(d,o)=>(k(),T("div",{class:"node",ref_key:"node",ref:r},null,512))}}),Lt=te(uo,[["__scopeId","data-v-4673aca5"]]),co=J({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((i,r)=>()=>r(i),()=>s(N,null,[e.components.map(i=>j(i))]))();return(i,r)=>u(Rt)(u(i.visibility))?(k(),T("div",{key:0,style:Ie([{visibility:u(lo)(u(i.visibility))?"hidden":void 0},u(i.style)]),class:ee({feature:!0,...u(i.classes)})},[s(t),s(Lt,{id:i.id},null,8,["id"])],6)):O("",!0)}});function fo(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Rn(n)}const di=Symbol("VueFeature");function lt(n,e,t){return{id:oo(n),visibility:D(e.visibility),classes:D(e.classes),style:D(e.style),components:t==null?[]:[t],wrappers:[],[di]:!0}}function j(n,e){if(typeof n=="object"&&di in n){const{id:t,visibility:i,style:r,classes:a,components:d,wrappers:o}=n;return s(co,{id:t,visibility:i,style:r,classes:a,components:d,wrappers:o},null)}return n=Ki(n),(e==null?void 0:e(n))??n}function mt(...n){let e;return s(ao,null,fo(e=n.map(t=>j(t)))?e:{default:()=>[e]})}function An(n,e){return n.reduce((t,i)=>s(N,null,[t,e,j(i)]),s(N,null,null))}function yn(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function fi(n){const e=R(null),t=R(void 0);function i(d){e.value==null&&(e.value=setInterval(a,250)),t.value=d}function r(){e.value!=null&&(clearInterval(e.value),e.value=null)}function a(){n(t.value)}return Dn(r),{start:i,stop:r,handleHolding:a}}function go(n){return Object.keys(n).reduce((e,t)=>(e[Yr(t)]=n[t],e),{})}const mo=["x1","y1","x2","y2"],po=J({__name:"Link",props:{link:{},startNode:{},endNode:{},boundingRect:{}},setup(n){const e=n,t=F(()=>{const a=e.startNode.rect,d=e.boundingRect,o=d?{x:a.x+a.width/2-d.x,y:a.y+a.height/2-d.y}:{x:0,y:0};return e.link.offsetStart&&(o.x+=e.link.offsetStart.x,o.y+=e.link.offsetStart.y),o}),i=F(()=>{const a=e.endNode.rect,d=e.boundingRect,o=d?{x:a.x+a.width/2-d.x,y:a.y+a.height/2-d.y}:{x:0,y:0};return e.link.offsetEnd&&(o.x+=e.link.offsetEnd.x,o.y+=e.link.offsetEnd.y),o}),r=F(()=>go(e.link));return(a,d)=>(k(),T("line",Be({"stroke-width":"15px",stroke:"white"},r.value,{x1:t.value.x,y1:t.value.y,x2:i.value.x,y2:i.value.y}),null,16,mo))}}),vo=J({__name:"Links",props:{links:{}},setup(n){var p;const e=n;function t(){var y;o.value=(y=r.value)==null?void 0:y.getBoundingClientRect()}const i=new ResizeObserver(t),r=Ot(null),a=xt(Hn,R({})),d=xt(Wn,R(void 0)),o=R((p=r.value)==null?void 0:p.getBoundingClientRect());be(d,t),un(()=>{const y=r.value;y!=null&&i.observe(y),t()});const c=F(()=>{var b;const y=a.value;return((b=u(e.links))==null?void 0:b.filter(w=>{var v,S;return((v=y[w.startNode.id])==null?void 0:v.rect)&&((S=y[w.endNode.id])==null?void 0:S.rect)}))??[]});return(y,b)=>(k(),T(N,null,[c.value?(k(),T("svg",Zi(Be({key:0},y.$attrs)),[(k(!0),T(N,null,De(c.value,(w,v)=>(k(),X(po,{key:v,link:w,boundingRect:o.value,startNode:u(a)[w.startNode.id],endNode:u(a)[w.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):O("",!0),m("div",{ref_key:"resizeListener",ref:r,class:"resize-listener"},null,512)],64))}}),ho=te(vo,[["__scopeId","data-v-95f1a2c2"]]),bo=J({__name:"Tree",props:{nodes:{},leftSideNodes:{},rightSideNodes:{},branches:{}},setup(n){const e=n,t=()=>u(e.nodes).map(a=>s("span",{class:"row tree-row",style:"margin: 50px auto;"},[a.map(d=>j(d))])),i=()=>e.leftSideNodes==null?s(N,null,null):s("span",{class:"left-side-nodes small"},[u(e.leftSideNodes).map(a=>j(a))]),r=()=>e.rightSideNodes==null?s(N,null,null):s("span",{class:"side-nodes small"},[u(e.rightSideNodes).map(a=>j(a))]);return(a,d)=>(k(),T(N,null,[s(t),a.leftSideNodes?(k(),X(i,{key:0})):O("",!0),a.rightSideNodes?(k(),X(r,{key:1})):O("",!0),a.branches?(k(),X(ho,{key:2,links:u(a.branches)},null,8,["links"])):O("",!0)],64))}}),yo=te(bo,[["__scopeId","data-v-b63a12ba"]]),wo=J({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?s(N,null,null):j(t.display,o=>s("div",null,[o])),{start:a,stop:d}=fi(()=>i("hold"));return(o,c)=>(k(),T("button",{style:Ie({backgroundColor:u(o.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${u(o.glowColor)}`}),class:ee({treeNode:!0,can:u(o.canClick)}),onClick:c[0]||(c[0]=p=>i("click",p)),onMousedown:c[1]||(c[1]=(...p)=>u(a)&&u(a)(...p)),onMouseleave:c[2]||(c[2]=(...p)=>u(d)&&u(d)(...p)),onMouseup:c[3]||(c[3]=(...p)=>u(d)&&u(d)(...p)),onTouchstartPassive:c[4]||(c[4]=(...p)=>u(a)&&u(a)(...p)),onTouchendPassive:c[5]||(c[5]=(...p)=>u(d)&&u(d)(...p)),onTouchcancelPassive:c[6]||(c[6]=(...p)=>u(d)&&u(d)(...p))},[s(r)],38))}}),No=te(wo,[["__scopeId","data-v-886f6f9c"]]),Co=Symbol("TreeNode"),So=Symbol("Tree");function ko(n){return me(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:i,display:r,glowColor:a,onClick:d,onHold:o,...c}=e,p={type:Co,...c,...lt("treeNode",e,()=>s(No,{canClick:p.canClick,display:p.display,onClick:p.onClick,onHold:p.onHold,color:p.color,glowColor:p.glowColor},null)),canClick:D(t)??!0,color:D(i),display:r,glowColor:D(a),onClick:d==null?void 0:function(y){u(p.canClick)!==!1&&d.call(p,y)},onHold:o==null?void 0:function(){u(p.canClick)!==!1&&o.call(p)}};return p})}function xo(n){return me(()=>{const e=n(),{branches:t,nodes:i,leftSideNodes:r,rightSideNodes:a,resetPropagation:d,onReset:o,style:c,...p}=e,y=D(c);e.style=()=>({position:"static",...u(y)??{}});const b=t==null?void 0:D(t),w={type:So,...p,...lt("tree",e,()=>s(yo,{nodes:w.nodes,leftSideNodes:w.leftSideNodes,rightSideNodes:w.rightSideNodes,branches:w.branches},null)),branches:b,isResetting:R(!1),resettingNode:Ot(null),nodes:D(i),leftSideNodes:D(r),rightSideNodes:D(a),links:b==null?[]:ve(b),resetPropagation:d,onReset:o,reset:function(v){var S,M;w.isResetting.value=!0,w.resettingNode.value=v,(S=w.resetPropagation)==null||S.call(w,w,v),(M=w.onReset)==null||M.call(w,v),w.isResetting.value=!1,w.resettingNode.value=null}};return w})}const Io=function(n,e){const t=u(n.nodes),i=t.findIndex(r=>r.includes(e))-1;for(let r=i;r>=0;r--)t[r].forEach(a=>{var d;return(d=a.reset)==null?void 0:d.reset()})};function gi(n,e=null,t=0){const i=D(t);return()=>e==null||l.gte(n.value,u(i))?s(N,null,[st(n),g(" "),n.displayName]):s(N,null,[g("Reach")," ",l.eq(e.precision,0)?ce(u(i)):ae(u(i),e.precision)," ",e.displayName,g(" to unlock (You have $"),l.eq(e.precision,0)?ce(e.value):ae(e.value,e.precision),g(")")])}const Mo=Symbol("Reset");function mi(n){return me(()=>{const e=n(),{thingsToReset:t,onReset:i,...r}=e,a={type:Mo,...r,onReset:i,thingsToReset:D(t),reset:function(){const d=o=>{if(o!=null&&typeof o=="object"&&!(o instanceof l)&&!(o instanceof f)){if(at in o&&o[at]===!0)return;if(Ue in o){const c=o;c.value=c[Ue]}else!(o instanceof l)&&!re(o)&&Object.values(o).forEach(c=>d(c))}};u(a.thingsToReset).forEach(d),oe.emit("reset",a),i==null||i()}};return a})}const Nt={};oe.on("removeLayer",n=>{var e;(e=Nt[n.id])==null||e.call(Nt),Nt[n.id]=void 0});const To={key:0,class:"material-icons pinned"},Po=J({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=R(!1),i=F(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0||t.value}),r=()=>j(e.display);function a(o){const c=e.pinned;o.shiftKey&&c!=null&&(c.value=!c.value,o.stopPropagation(),o.preventDefault())}const d=F(()=>{var o;return((o=e.pinned)==null?void 0:o.value)===!0&&_t[L.theme].showPin});return(o,c)=>(k(),T("div",{class:ee(["tooltip-container",{shown:i.value}]),onMouseenter:c[0]||(c[0]=p=>t.value=!0),onMouseleave:c[1]||(c[1]=p=>t.value=!1),onClickCapture:a},[Ce(o.$slots,"default",{},void 0,!0),s(_n,{name:"fade"},{default:G(()=>[i.value?(k(),T("div",{key:0,class:ee(["tooltip",{top:u(o.direction)===u(ue).Up,left:u(o.direction)===u(ue).Left,right:u(o.direction)===u(ue).Right,bottom:u(o.direction)===u(ue).Down,...u(o.classes)}]),style:Ie([{"--xoffset":u(o.xoffset)||"0px","--yoffset":u(o.yoffset)||"0px"},u(o.style)??{}])},[d.value?(k(),T("span",To,"push_pin")):O("",!0),s(r)],6)):O("",!0)]),_:1})],34))}}),le=te(Po,[["__scopeId","data-v-ce2812eb"]]);function $o(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Rn(n)}function pi(n,e){const t=Me(!1,!1),i=me(()=>{const r=e(),{pinnable:a,display:d,direction:o,xoffset:c,yoffset:p,...y}=r;return a===!1&&ai(t),{...y,...lt("tooltip",r),pinnable:a??!0,pinned:a===!1?void 0:t,display:d,direction:D(o??ue.Up),xoffset:D(c),yoffset:D(p)}});Zr(n,r=>{i.id,r.tooltip=i,r.wrappers.push(a=>Rt(i.visibility??!0)?s(le,{pinned:i.pinned,display:i.display,classes:i.classes,style:i.style,direction:i.direction,xoffset:i.xoffset,yoffset:i.yoffset},$o(a)?a:{default:()=>[a]}):s(N,null,[a]))})}const Vo=["disabled"],Fo=J({__name:"Clickable",props:{canClick:{},display:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?s(N,null,null):j(t.display),{start:a,stop:d}=fi(()=>i("hold"));return(o,c)=>(k(),T("button",{onClick:c[0]||(c[0]=p=>i("click",p)),onMousedown:c[1]||(c[1]=(...p)=>u(a)&&u(a)(...p)),onMouseleave:c[2]||(c[2]=(...p)=>u(d)&&u(d)(...p)),onMouseup:c[3]||(c[3]=(...p)=>u(d)&&u(d)(...p)),onTouchstartPassive:c[4]||(c[4]=(...p)=>u(a)&&u(a)(...p)),onTouchendPassive:c[5]||(c[5]=(...p)=>u(d)&&u(d)(...p)),onTouchcancelPassive:c[6]||(c[6]=(...p)=>u(d)&&u(d)(...p)),class:ee({clickable:!0,can:u(o.canClick),locked:!u(o.canClick)}),disabled:!u(o.canClick)},[s(r)],42,Vo))}}),wn=te(Fo,[["__scopeId","data-v-3129c080"]]),Ao=Symbol("Clickable");function Eo(n){return me(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:i,onClick:r,onHold:a,...d}=e;let o;typeof i=="object"&&!yn(i)?o=()=>s("span",null,[i.title!=null?s("div",null,[j(i.title,p=>s("h3",null,[p]))]):null,j(i.description,p=>s("div",null,[p]))]):i!=null&&(o=i);const c={type:Ao,...d,...lt("clickable",e,()=>s(wn,{canClick:c.canClick,onClick:c.onClick,onHold:c.onClick,display:c.display},null)),canClick:D(t)??!0,display:o,onClick:r==null?void 0:function(p){u(c.canClick)!==!1&&r.call(c,p)},onHold:a==null?void 0:function(){u(c.canClick)!==!1&&a.call(c)}};return c})}function Oo(n){const e=Eo(()=>{const t=n(),{conversion:i,tree:r,treeNode:a,resetTime:d,resetDescription:o,showNextAt:c,minimumGain:p,display:y,canClick:b,onClick:w,...v}=t;return{...v,conversion:i,tree:r,treeNode:a,resetTime:d,resetDescription:D(o)??F(()=>l.lt(i.gainResource.value,1e3)?"Reset for ":""),showNextAt:D(c)??!0,minimumGain:D(p)??1,canClick:D(b)??F(()=>l.gte(u(i.actualGain),u(e.minimumGain))),display:y??(()=>s("span",null,[u(e.resetDescription),s("b",null,[st(i.gainResource,l.max(u(i.actualGain),u(e.minimumGain)))])," ",i.gainResource.displayName,u(!0)!=null?s("div",null,[s("br",null,null),u(i.buyMax)?"Next:":"Req:"," ",st(i.baseResource,!u(i.buyMax)&&l.gte(u(i.actualGain),1)?u(i.currentAt):u(i.nextAt))," ",i.baseResource.displayName]):null])),onClick:function(S){u(e.canClick)!==!1&&(i.convert(),r.reset(a),d&&(d.value=d[Ue]),w==null||w.call(e,S))}}});return e}function vi(n){const e=ko(()=>{const t=n(),{display:i,append:r,layerID:a,...d}=t;return{...d,layerID:a,display:i??a,append:D(r)??!0,onClick(){if(u(e.append))if($.tabs.includes(a)){const o=$.tabs.lastIndexOf(a);$.tabs.splice(o,1)}else $.tabs.push(a);else $.tabs.splice(1,1,a)}}});return e}function _o(n){const e=[],t={};let i=!1;function r(){return i||(e.push(...n()),t.base=e.map(o=>D(o.base)),t.baseText=e.map(o=>o.baseText),t.visible=e.map(o=>D(o.visible)),t.title=e.map(o=>D(o.title)),t.subtitle=e.map(o=>D(o.subtitle)),i=!0),e}const a=Me({},!1);return[()=>{const o=r();let c=!0;const p=o.map((y,b)=>{if(u(t.visible[b])===!1)return null;const w=s("h3",{onClick:()=>a.value[b]=!a.value[b],style:"cursor: pointer"},[s("span",{class:"modifier-toggle"+(u(a.value[b])?" collapsed":"")},[g("â¼")]),u(t.title[b]),u(t.subtitle[b])!=null?s("span",{class:"subtitle"},[g(" ("),u(t.subtitle[b]),g(")")]):null]),v=u(a.value[b])?null:s(N,null,[s("div",{class:"modifier-container"},[s("span",{class:"modifier-description"},[j(u(t.baseText[b])??"Base")]),s("span",{class:"modifier-amount"},[ae(u(t.base[b])??1),y.unit])]),y.modifier.description==null?null:j(u(y.modifier.description))]),S=!c;c=!1;const M=u(t.base[b])??1,A=y.modifier.apply(M);return s(N,null,[S?s("br",null,null):null,s("div",{style:{"--unit":L.alignUnits&&y.unit!=null?"'"+y.unit+"'":""}},[w,s("br",null,null),v,s("hr",null,null),s("div",{class:"modifier-container"},[s("span",{class:"modifier-description"},[g("Total")]),s("span",{class:"modifier-amount",style:(y.smallerIsBetter===!0?l.gt(A,M??1):l.lt(A,M??1))?"color: var(--danger)":""},[Dt(A),y.unit])])])])});return s(N,null,[p])},a]}function Do(n,e,t){const[i,r]=_o(e),a=n;ai(r);const d=R(!1);return()=>s(N,null,[s("button",{class:"button",style:{display:"inline-block",fontSize:"1em",border:"none",color:"var(--link)"},onClick:()=>d.value=!0},[g("ð")]),s(ze,{modelValue:d.value,"onUpdate:modelValue":o=>d.value=o},{header:()=>s("h2",null,[u(a)]),body:i})])}function Pe(n){return me(e=>{const t=n.call(e),{visibility:i,cost:r,resource:a,requiresPay:d,cumulativeCost:o,maxBulkAmount:c,directSum:p,pay:y}=t,b={resource:a,visibility:D(i)??ht.Visible,cost:D(r),requiresPay:D(d)??!0,cumulativeCost:D(o)??!0,maxBulkAmount:D(c)??1,directSum:D(p),partialDisplay:w=>s("span",{style:l.gt(u(b.requirementMet),0)?"":"color: var(--danger)"},[st(a,b.cost instanceof f?St(b.cost,w??1,u(b.cumulativeCost),u(b.directSum)):u(b.cost))," ",a.displayName]),display:w=>s("div",null,[u(b.requiresPay)?"Cost: ":"Requires: ",st(a,b.cost instanceof f?St(b.cost,w??1,u(b.cumulativeCost),u(b.directSum)):u(b.cost))," ",a.displayName]),canMaximize:F(()=>{if(!(b.cost instanceof f))return!1;const w=u(b.maxBulkAmount);if(l.lte(w,1))return!1;const v=u(b.cumulativeCost),S=u(b.directSum)??(v?10:0);return l.lte(w,S)?!0:!(!b.cost.isInvertible()||v===!0&&!b.cost.isIntegrable())}),requirementMet:r instanceof f?Zs(r,a,o??!0,p,c):F(()=>l.gte(a.value,u(b.cost))?1:0),pay:y??function(w){const v=b.cost instanceof f?St(b.cost,w??1,u(b.cumulativeCost),u(b.directSum)):u(b.cost);a.value=l.sub(a.value,v).max(0)}};return b})}function hi(n){return me(()=>({requirementMet:F(()=>Rt(n)),visibility:ht.None,requiresPay:!1}))}function Te(n,e){return me(()=>({requirementMet:D(n),partialDisplay:void 0,display:void 0,visibility:ht.None,requiresPay:!1}))}function Nn(n){if(Array.isArray(n))return n.every(Nn);const e=u(n.requirementMet);return typeof e=="boolean"?e:l.gt(e,0)}function bi(n){if(Array.isArray(n))return n.map(bi).reduce(l.min);const e=u(n.requirementMet);return typeof e=="boolean"?e?l.dInf:0:l.gt(e,1)&&u(n.canMaximize)!==!0?1:e}function yi(n,e=1){var t;if(Array.isArray(n)&&(n=n.filter(i=>Rt(i.visibility??!0)),n.length===1&&(n=n[0])),Array.isArray(n)){n=n.filter(a=>"partialDisplay"in a);const i=n.filter(a=>u(a.requiresPay)),r=n.filter(a=>!u(a.requiresPay));return s(N,null,[i.length>0?s("div",null,[g("Costs:")," ",An(i.map(a=>a.partialDisplay(e)),s(N,null,[g(", ")]))]):null,r.length>0?s("div",null,[g("Requires:")," ",An(r.map(a=>a.partialDisplay(e)),s(N,null,[g(", ")]))]):null])}return((t=n.display)==null?void 0:t.call(n))??s(N,null,null)}function wi(n,e=1){var t;Array.isArray(n)?n.filter(i=>u(i.requiresPay)).forEach(i=>{var r;return(r=i.pay)==null?void 0:r.call(i,e)}):u(n.requiresPay)&&((t=n.pay)==null||t.call(n,e))}const Ro=Symbol("Upgrade");function ge(n){const e=Me(!1,!1);return me(()=>{const t=n(),{requirements:i,display:r,onHold:a,...d}=t;if(t.classes==null)t.classes=F(()=>({bought:u(y.bought)}));else{const b=D(t.classes);t.classes=F(()=>({...u(b),bought:u(y.bought)}))}const o=lt("upgrade",t,()=>s(wn,{onClick:y.purchase,onHold:y.onHold,canClick:y.canPurchase,display:y.display},null)),c=Array.isArray(i)?i:[i];o.visibility!=null&&c.push(hi(o.visibility));let p;if(typeof r=="object"&&!yn(r)){const{title:b,description:w,effectDisplay:v}=r;p=()=>s("span",null,[b!=null?s("div",null,[j(b,S=>s("h3",null,[S]))]):null,j(w,S=>s("div",null,[S])),v!=null?s("div",null,[g("Currently: "),j(v)]):null,e.value?null:s(N,null,[s("br",null,null),yi(c)])])}else r!=null&&(p=r);const y={type:Ro,...d,...o,bought:e,canPurchase:F(()=>!e.value&&Nn(c)),requirements:c,display:p,onHold:a,purchase(){var b;u(y.canPurchase)&&(wi(c),e.value=!0,(b=t.onPurchase)==null||b.call(t))}};return y})}const Lo=Symbol("Repeatable");function qo(n){const e=Me(0);return me(()=>{const t=n(),{requirements:i,display:r,limit:a,onClick:d,initialAmount:o,...c}=t;if(t.classes==null)t.classes=F(()=>({bought:u(v.maxed)}));else{const S=D(t.classes);t.classes=F(()=>({...u(S),bought:u(v.maxed)}))}const p=lt("repeatable",t,()=>s(wn,{canClick:v.canClick,onClick:v.onClick,onHold:v.onClick,display:v.display},null)),y={requirementMet:F(()=>l.sub(u(v.limit),u(e))),requiresPay:!1,visibility:ht.None,canMaximize:!0},b=[...Array.isArray(i)?i:[i],y];p.visibility!=null&&b.push(hi(p.visibility));let w;if(typeof r=="object"&&!yn(r)){const{title:S,description:M,effectDisplay:A,showAmount:x}=r;w=()=>s("span",null,[S==null?null:s("div",null,[j(S,V=>s("h3",null,[V]))]),j(M),x===!1?null:s("div",null,[s("br",null,null),s(N,null,[g("Amount: "),ce(u(e))]),l.isFinite(u(v.limit))?s(N,null,[g(" / "),ce(u(v.limit))]):void 0]),A==null?null:s("div",null,[s("br",null,null),g("Currently: "),j(A)]),u(v.maxed)?null:s("div",null,[s("br",null,null),yi(b,u(v.amountToIncrease))])])}else r!=null&&(w=r);e[Ue]=o??0;const v={type:Lo,...c,...p,amount:e,requirements:b,initialAmount:o,limit:D(a)??l.dInf,classes:F(()=>{const S=u(p.classes)||{};return u(v.maxed)&&(S.bought=!0),S}),maxed:F(()=>l.gte(u(e),u(v.limit))),canClick:F(()=>Nn(b)),amountToIncrease:F(()=>l.clampMin(bi(b),1)),onClick(S){if(!u(v.canClick))return;const M=u(v.amountToIncrease)??1;wi(b,M),e.value=l.add(u(e),M),d==null||d(S)},display:w};return v})}function Uo(n){return me(()=>{const{addend:e,description:t,enabled:i,smallerIsBetter:r}=n(),a=D(e),d=i==null?void 0:D(i);return{apply:o=>l.add(o,u(a)),invert:o=>l.sub(o,u(a)),getFormula:o=>f.add(o,a),enabled:d,description:t==null?void 0:()=>s("div",{class:"modifier-container"},[s("span",{class:"modifier-description"},[j(t)]),s("span",{class:"modifier-amount",style:(r===!0?l.gt(u(a),0):l.lt(u(a),0))?"color: var(--danger)":""},[l.gte(u(a),0)?"+":"",Dt(u(a))])])}})}function sn(n){return me(()=>{const{multiplier:e,description:t,enabled:i,smallerIsBetter:r}=n(),a=D(e),d=i==null?void 0:D(i);return{apply:o=>l.times(o,u(a)),invert:o=>l.div(o,u(a)),getFormula:o=>f.times(o,a),enabled:d,description:t==null?void 0:()=>s("div",{class:"modifier-container"},[s("span",{class:"modifier-description"},[j(t)]),s("span",{class:"modifier-amount",style:(r===!0?l.gt(u(a),1):l.lt(u(a),1))?"color: var(--danger)":""},[g("Ã"),Dt(u(a))])])}})}function Bo(n){return me(()=>{const e=n();return{apply:t=>e.filter(i=>u(i.enabled)!==!1).reduce((i,r)=>r.apply(i),t),invert:e.every(t=>t.invert!=null)?t=>e.filter(i=>u(i.enabled)!==!1).reduceRight((i,r)=>r.invert(i),t):void 0,getFormula:e.every(t=>t.getFormula!=null)?t=>e.reduce((i,r)=>r.enabled==null||r.enabled===!0?r.getFormula(i):f.if(i,r.enabled,a=>r.getFormula(a)),t):void 0,enabled:e.some(t=>t.enabled!=null)?F(()=>e.filter(t=>u(t.enabled)!==!1).length>0):void 0,description:e.some(t=>t.description!=null)?()=>e.filter(t=>u(t.enabled)!==!1).map(t=>u(t.description)).filter(t=>t).map(t=>j(t)):void 0}})}const Ni=J({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(n){return(e,t)=>(k(),T("div",{style:Ie({width:e.width,height:e.height})},null,4))}}),Cn=J({__name:"Resource",props:{resource:{},color:{}},setup(n){const e=n,t=()=>j(st(e.resource));return(i,r)=>(k(),T("h2",{style:Ie({color:i.color,"text-shadow":"0px 0px 10px "+i.color})},[s(t)],4))}}),zo=Symbol("Conversion");function Go(n){return me(()=>{const e=n(),{baseResource:t,gainResource:i,formula:r,currentGain:a,actualGain:d,currentAt:o,nextAt:c,convert:p,spend:y,buyMax:b,onConvert:w,...v}=e,S=a==null?F(()=>{let A=l.floor(M.formula.evaluate(t.value)).max(0);return u(M.buyMax)===!1&&(A=A.min(1)),A}):D(a),M={type:zo,...v,baseResource:t,gainResource:i,formula:r(f.variable(t)),currentGain:S,actualGain:d==null?S:D(d),currentAt:o==null?F(()=>M.formula.invert(l.floor(u(M.currentGain)))):D(o),nextAt:c==null?F(()=>M.formula.invert(l.floor(u(M.currentGain)).add(1))):D(c),convert:p??function(){const A=u(M.currentGain);i.value=l.add(i.value,A),M.spend(A),w==null||w(A)},spend:y??(()=>t.value=0),buyMax:D(b)??!0,onConvert:w};return M})}function jo(n){return Go(n)}const Ho={style:{"white-space":"nowrap",display:"inline-block"},class:"fraction-wrapper"},Wo={style:{display:"inline-block","padding-left":"0.2em","padding-right":"0.2em"}},Qo={style:{display:"inline-block","border-top":"1px solid","padding-left":"0.2em","padding-right":"0.2em"}},Jo=J({__name:"Fraction",setup(n){const e=()=>j(ce(1));return(t,i)=>(k(),T("div",Ho,[m("div",Wo,[Ce(t.$slots,"numerator",{},()=>[s(e)],!0)]),i[0]||(i[0]=m("br",null,null,-1)),m("div",Qo,[Ce(t.$slots,"denominator",{},()=>[s(e)],!0)])]))}}),Yo=te(Jo,[["__scopeId","data-v-55064b0d"]]),Ko={class:"key"},Zo=J({__name:"Hotkey",props:{hotkey:{}},setup(n){const e=n;let t="",i=!1,r=!1,a=!1;return Ln(()=>{t=e.hotkey.key,i=t.startsWith("ctrl+"),i&&(t=t.slice(5)),r=t.startsWith("shift+"),r&&(t=t.slice(6)),a=t.length==1&&t.toLowerCase()!=t.toUpperCase(),a&&(t=t.toUpperCase())}),(d,o)=>(k(),T(N,null,[u(i)?(k(),T(N,{key:0},[o[0]||(o[0]=m("div",{class:"key"},"Ctrl",-1)),o[1]||(o[1]=g("+"))],64)):O("",!0),u(r)?(k(),T(N,{key:1},[o[2]||(o[2]=m("div",{class:"key"},"Shift",-1)),o[3]||(o[3]=g("+"))],64)):O("",!0),m("div",Ko,Q(u(t)),1)],64))}}),Ci=te(Zo,[["__scopeId","data-v-7bcb4952"]]),pt=Et({}),Sn=Symbol("Hotkey"),ct=[")","!","@","#","$","%","^","&","*","("];function kt(n){return me(()=>{const e=n(),{enabled:t,description:i,key:r,onPress:a,...d}=e;return{type:Sn,...d,enabled:D(t)??!0,description:D(i),key:r,onPress:a}})}oe.on("addLayer",n=>{ci(n,Sn).forEach(e=>{pt[e.key]=e})});oe.on("removeLayer",n=>{ci(n,Sn).forEach(e=>{pt[e.key]=void 0})});document.onkeydown=function(n){var i;if(((i=n.target)==null?void 0:i.tagName)==="INPUT"||it.value&&!$.keepGoing)return;const e=[n.key];n.shiftKey&&n.ctrlKey?(e.splice(0,1),e.push("ctrl+shift+"+n.key.toUpperCase()),e.push("shift+ctrl+"+n.key.toUpperCase()),ct.includes(n.key)?(e.push("ctrl+shift+"+ct.indexOf(n.key)),e.push("shift+ctrl+"+ct.indexOf(n.key))):(e.push("ctrl+shift+"+n.key.toLowerCase()),e.push("shift+ctrl+"+n.key.toLowerCase()))):ct.includes(n.key)?(e.push("shift+"+n.key),e.push("shift+"+ct.indexOf(n.key))):n.shiftKey?(e.push("shift+"+n.key.toUpperCase()),e.push("shift+"+n.key.toLowerCase())):n.ctrlKey&&(e.splice(0,1),e.push("ctrl+"+n.key));const t=pt[e.find(r=>r in pt)??""];t!=null&&u(t.enabled)!==!1&&(n.preventDefault(),t.onPress())};oe.on("setupVue",()=>ol(()=>{const n=Object.values(pt).filter(e=>u(e==null?void 0:e.enabled));return n.length===0?"":s("div",null,[s("br",null,null),s("h3",null,[g("Hotkeys")]),s("div",{style:"column-count: 2"},[n.map(e=>s("div",null,[s(Ci,{hotkey:e},null),g(" "),e==null?void 0:e.description]))])])}));const Xo="rebirth",Re=gn(Xo,()=>{const n=bn(0,"RP",0,!1),e=Me([]),t=si(n),i=oi(n),r=F(()=>{const A=l.dZero;return We.upgrades[0].bought.value?A:l.dZero}),a=li(n,r),d=kt(()=>({key:"r",description:"Perform a Rebirth",onPress(){var A;(A=v.onClick)==null||A.call(v)}})),o={rp_innate:F(()=>l.max(i.value,0).mul(12).add(1).log10().add(1)),upg_count:F(()=>{let A=0;for(let x=0;x<M.length;x++)M[x].bought.value&&A++;return A}),upg_0:F(()=>l.mul(.02,o.upg_count.value)),upg_1:F(()=>l.pow(1.1,o.upg_count.value).recip()),upg_2:F(()=>l.mul(.05,o.upg_count.value)),upg_3:F(()=>l.mul(5,o.upg_count.value))};oe.on("update",A=>{n.value=l.add(n.value,l.times(r.value,A))});const c="Rebirth",p="#c60029",y=vi(()=>({layerID:"rebirth",color:p,reset:S,display:"R",append:()=>window.innerWidth>=1e3,visibility:()=>We.upgrades[1].bought.value})),b=pi(y,()=>({display:gi(n),pinnable:!0})),w=jo(()=>({baseResource:ve(_e.points),gainResource:ve(n),formula:A=>A.div(5e5).pow(.3)})),v=Oo(()=>({requirements:Te(()=>l.gt(u(w.actualGain),0)),display:()=>s(N,null,[s("span",{style:"font-size: 10.9512px;"},[g("Rebirth")]),s("br",null,null),u(v.canClick)?s(N,null,[g("Rebirth for "),ce(u(w.actualGain)),g(" Rebirth Points"),l.gte(u(w.actualGain),100)?s(N,null,null):s(N,null,[g(", next at "),ce(u(w.nextAt)),g(" Cash")])]):s(N,null,[g("Reach "),ce(5e5),g(" Cash to Rebirth")])]),conversion:w,treeNode:y,tree:We.tree,classes:{pylon:!0}})),S=mi(()=>({thingsToReset:()=>[]})),M=[ge(()=>({requirements:Pe(()=>({cost:3,resource:ve(n)})),classes:{rebirth:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Polyhedron")])]),description:()=>s(N,null,[g('Improve "Polynomial Growth" by +'),ae(.02),g("Ã per rebirth upgrade")]),effectDisplay:()=>s(N,null,[g("+"),ae(o.upg_0.value),g("Ã")])}})),ge(()=>({requirements:Pe(()=>({cost:3,resource:ve(n)})),classes:{rebirth:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Bulk Buying")])]),description:()=>s(N,null,[g("Multiply base printer cost growth by")," ",s(Yo,null,{denominator:()=>s(N,null,[ae(1.1)])}),g(" per rebirth upgrade")]),effectDisplay:()=>s(N,null,[ae(o.upg_1.value),g("Ã")])}})),ge(()=>({requirements:Pe(()=>({cost:3,resource:ve(n)})),classes:{rebirth:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Indices")])]),description:()=>s(N,null,[g('Improve "Exponential Growth" by +'),ae(.05),g("Ã per rebirth upgrade")]),effectDisplay:()=>s(N,null,[g("+"),ae(o.upg_2.value),g("Ã")])}})),ge(()=>({requirements:Pe(()=>({cost:3,resource:ve(n)})),classes:{rebirth:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Family Heirloom")])]),description:()=>s(N,null,[g("Gives +"),ce(5),g(" free printers per rebirth upgrade")]),effectDisplay:()=>s(N,null,[g("+"),ce(o.upg_3.value)])}}))];return{name:c,color:p,tooltip:b,display:()=>s(N,null,[s("div",{style:"margin-top: -000px;"},[g("You have "),s(Cn,{resource:n,color:"#c60029"},null),g(" Rebirth Points, boosting:"),s("br",null,null),s("span",{class:"inline-tooltip"},[s(le,{direction:ue.Up,display:"Based on total"},{default:()=>[s("span",{class:"material-icons"},[g("vertical_align_top")])]})]),g("Cash gain "),ae(o.rp_innate.value),g("Ã"),l.gt(r.value,0)?s("div",null,[g("("),a(),g(")"),s("br",null,null),s(Lt,{id:"oomps"},null)]):s(N,null,[s("br",null,null),s("br",null,null)]),s(Ni,null,null),s("div",{style:"display: flex; width: fit-content;"},[j(v),s(ui,{style:"margin-left: 20px; margin-top: -10px;"},{default:()=>[mt(M[0],M[1]),mt(M[2],M[3])]})])])]),effects:o,treeNode:y,points:n,best:t,total:i,passiveGen:r,oomps:a,reset:S,machine:e,upgrades:M,conversion:w,resetButton:v,hotkey:d}}),el="cash",_e=gn(el,()=>{const n=bn(10,"Cash",2,!1),e=Me([]),t=si(n),i=oi(n),r=F(()=>{const _=d.apply(0);return We.upgrades[0].bought.value?_:l.dZero}),a=li(n,r),d=Bo(()=>[Uo(()=>({addend:o.printer_0,description:"Money Printers"})),sn(()=>({multiplier:o.upg_0,enabled:S[0].bought,description:"Polynomial Growth"})),sn(()=>({multiplier:o.upg_2,enabled:S[2].bought,description:"Exponential Growth"})),sn(()=>({multiplier:Re.effects.rp_innate,enabled:We.upgrades[1].bought,description:"RP Effect"}))]),o={printer_0:F(()=>x[0].amount.value),upg_count:F(()=>{let _=0;for(let ne=0;ne<S.length;ne++)S[ne].bought.value&&_++;return _}),upg_0:F(()=>l.mul(x[0].amount.value,c.upg_0_per.value).add(1)),upg_2:F(()=>l.div(x[0].amount.value,10).floor().pow_base(c.upg_2_per.value))},c={upg_0_per:F(()=>{let _=.1;return Re.upgrades[0].bought.value&&(_=l.add(_,Re.effects.upg_0.value)),_}),upg_2_per:F(()=>{let _=1.5;return Re.upgrades[2].bought.value&&(_=l.add(_,Re.effects.upg_2.value)),_})};oe.on("update",_=>{n.value=l.add(n.value,l.times(r.value,_))});const p="Cash",y="#0b9000",b=mi(()=>({thingsToReset:()=>[n,e,t,i,S,x]})),w=vi(()=>({layerID:"cash",color:y,reset:b,display:"$",append:()=>window.innerWidth>=1e3})),v=pi(w,()=>({display:gi(n),pinnable:!0})),S=[ge(()=>({requirements:Pe(()=>({cost:100,resource:ve(n)})),classes:{cash:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Polynomial Growth")])]),description:()=>s(N,null,[g("Printers boost Cash gain by +"),ae(.1),g("Ã")]),effectDisplay:()=>s(N,null,[ae(o.upg_0.value),g("Ã")])}})),ge(()=>({requirements:Pe(()=>({cost:1e3,resource:ve(n)})),classes:{cash:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Coupon Code")])]),description:()=>s(N,null,[g("Decrease base printer cost growth from "),Z(10),g("Ã to")," ",Z(8),g("Ã")])}})),ge(()=>({requirements:Pe(()=>({cost:5e3,resource:ve(n)})),classes:{cash:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Exponential Growth")])]),description:()=>s(N,null,[g("Every "),Z(10),g(" printers bought boost Cash gain by "),ae(1.5),g("Ã")]),effectDisplay:()=>s(N,null,[ae(o.upg_2.value),g("Ã")])}})),ge(()=>({requirements:Pe(()=>({cost:5e4,resource:ve(n)})),classes:{cash:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Overstocked")])]),description:()=>s(N,null,[g("Increase the amount of printers per price increase from "),Z(10),g(" to")," ",Z(15)])}}))],M=[F(()=>{let _=l.dTen;return S[1].bought.value&&(_=_.div(1.25)),_})],A=[F(()=>{let _=l.dTen;return S[3].bought.value&&(_=_.mul(1.5)),_})],x=[qo(()=>({requirements:Pe(()=>({cost:f.variable(x[0].amount).div(A[0]).floor().pow_base(M[0]).mul(10),resource:ve(n),maxBulkAmount:()=>1})),classes:{cash:!0,pylon:!0},display:{title:()=>s(N,null,[s("h3",null,[g("Money Printers")])]),description:()=>s(N,null,[g("Each printer give +"),Z(1),g(" Cash/s"),s("br",null,null),s("i",null,[g("You have "),Z(x[0].amount.value),g(" printers")])]),showAmount:!1}}))],V=Do("Cash Modifiers",()=>[{title:"Cash Gain",modifier:d,base:0,unit:"/s"}]);return{name:p,color:y,tooltip:v,display:()=>s(N,null,[s("div",{style:"margin-top: 0px;"},[g("+ You have "),s(Cn,{resource:n,color:"#0b9000"},null),g(" Cash"),j(V),l.gt(r.value,0)?s("div",null,[g("("),a(),g(")"),s("br",null,null),s("br",null,null),s(Lt,{id:"oomps"},null)]):s(N,null,[s("br",null,null),s("br",null,null),s("br",null,null)]),s(Ni,null,null),s("div",{style:"display: flex; width: fit-content;"},[j(x[0]),s(ui,{style:"margin-left: 20px; margin-top: -10px;"},{default:()=>[mt(S[0],S[1]),mt(S[2],S[3])]})])])]),effects:o,treeNode:w,points:n,best:t,total:i,pointGain:r,oomps:a,reset:b,machine:e,upgrades:S,printers:x}}),We=gn("main",()=>{const n=bn(0,"progress"),e=xo(()=>({nodes:ve([[_e.treeNode],[Re.treeNode]]),branches:[{startNode:ve(Re.treeNode),endNode:ve(_e.treeNode)}],resetPropagation:Io})),t=kt(()=>({description:"Toggle Pause",key:"/",onPress(){$.devSpeed=($.devSpeed??1)<=.001?1:0}})),i=kt(()=>({description:"Accelerate Time",key:"]",onPress(){$.devSpeed=($.devSpeed??1)*1.5},enabled(){return L.e===!0}})),r=kt(()=>({description:"Decelerate Time",key:"[",onPress(){$.devSpeed=($.devSpeed??1)/1.5},enabled(){return L.e===!0}})),a=[ge(()=>({requirements:Te(()=>!0),classes(){return{cash:!0,creation:!0,primaryCreation:!a[0].bought.value}},display(){return s(N,null,[s("h2",null,[g("Create Cash")]),s("br",null,null),s("i",null,[g("It works as a starting point, but feels pretty meaningless")]),s("br",null,null),s("br",null,null),g("Requires: Nothing")])}})),ge(()=>({requirements:Te(()=>l.gte(_e.pointGain.value,1e4)),classes(){return{rebirth:!0,mystery:!a[0].bought.value,creation:!0,primaryCreation:!a[1].bought.value&&a[0].bought.value}},display(){return a[0].bought.value?s(N,null,[s("h2",null,[g("Create Rebirth")]),s("br",null,null),s("i",null,[g("Wow, resetting for a boost, where have I seen that before")]),s("br",null,null),s("br",null,null),g("Requires: "),ce(1e4),g(" Cash/s")]):s(N,null,[s("h2",null,[g("???")]),s("br",null,null),s("i",null,[g("Keep playing to discover")])])}})),ge(()=>({requirements:Te(()=>!1),classes(){return{rebirth:!0,mystery:!a[1].bought.value,creation:!0,primaryCreation:!a[2].bought.value&&a[1].bought.value}},display(){return a[1].bought.value?s(N,null,[s("h2",null,[g("Create a Machine")]),s("br",null,null),s("i",null,[g("This one requires you to think - never done that before have you?")]),s("br",null,null),s("br",null,null),g("Requires: "),ce(1e10),g(" Cash/s")]):s(N,null,[s("h2",null,[g("???")]),s("br",null,null),s("i",null,[g("Keep playing to discover")])])}})),ge(()=>({requirements:Te(()=>!1),classes(){return{super:!0,mystery:!a[2].bought.value,creation:!0,primaryCreation:!a[3].bought.value&&a[2].bought.value}},display(){return a[2].bought.value?s(N,null,[s("h2",null,[g("Create Super Rebirth")]),s("br",null,null),s("i",null,[g('All that progress was for """nothing"""')]),s("br",null,null),s("br",null,null),g("Requires: "),ce(1e30),g(" Cash/s")]):s(N,null,[s("h2",null,[g("???")]),s("br",null,null),s("i",null,[g("Keep playing to discover")])])}})),ge(()=>({requirements:Te(()=>!1),classes(){return{super:!0,mystery:!a[3].bought.value,creation:!0,primaryCreation:!a[4].bought.value&&a[3].bought.value}},display(){return a[3].bought.value?s(N,null,[s("h2",null,[g("Create Power")]),s("br",null,null),s("i",null,[g("Electricity, not corruption, important distinction")]),s("br",null,null),s("br",null,null),g("Requires: "),ce(1e50),g(" Cash/s")]):s(N,null,[s("h2",null,[g("???")]),s("br",null,null),s("i",null,[g("Keep playing to discover")])])}})),ge(()=>({requirements:Te(()=>!1),classes(){return{hyper:!0,mystery:!a[4].bought.value,creation:!0,primaryCreation:!a[5].bought.value&&a[4].bought.value}},display(){return a[4].bought.value?s(N,null,[s("h2",null,[g("Create Hyper Rebirth")]),s("br",null,null),s("i",null,[g("This naming scheme is starting to get a bit boring")]),s("br",null,null),s("br",null,null),g("Requires: "),ce(1e100),g(" Cash/s")]):s(N,null,[s("h2",null,[g("???")]),s("br",null,null),s("i",null,[g("Keep playing to discover")])])}})),ge(()=>({requirements:Te(()=>!1),classes(){return{hyper:!0,mystery:!a[5].bought.value,creation:!0,primaryCreation:!a[6].bought.value&&a[5].bought.value}},display(){return a[5].bought.value?s(N,null,[s("h2",null,[g("Create MatterÂ ")]),s("i",null,[g("& friends")]),s("br",null,null),s("i",null,[g("This should have come first")]),s("br",null,null),s("br",null,null),g("Requires: "),ce(1e150),g(" Cash/s")]):s(N,null,[s("h2",null,[g("???")]),s("br",null,null),s("i",null,[g("Keep playing to discover")])])}})),ge(()=>({requirements:Te(()=>!1),classes(){return{hyper:!0,mystery:!a[6].bought.value,creation:!0,primaryCreation:!a[7].bought.value&&a[6].bought.value}},display(){return a[6].bought.value?s(N,null,[s("h2",null,[g("Create Universes")]),s("br",null,null),s("i",null,[g("The first actually quantifiable feature")]),s("br",null,null),s("br",null,null),g("Requires: "),ce("1e1000"),g(" Cash/s")]):s(N,null,[s("h2",null,[g("???")]),s("br",null,null),s("i",null,[g("Keep playing to discover")])])}}))],d=F(()=>{let o=0;return a[0].bought.value&&o++,a[1].bought.value&&o++,a[2].bought.value&&o++,a[3].bought.value&&o++,a[4].bought.value&&o++,a[5].bought.value&&o++,a[6].bought.value&&o++,a[7].bought.value&&o++,o});return{name:"Tree",links:e.links,minimizable:!0,display:()=>s(N,null,[s("div",{class:"creationBox"},[s("div",{style:{translate:`${515-150*d.value}px 0`,"z-index":"-1"}},[mt(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])])]),a[0].bought.value?s("div",{style:"margin-top: -150px;"},[g("You have "),s(Cn,{resource:_e.points,color:"#0b9000"},null),g(" Cash"),l.gt(_e.pointGain.value,0)?s("div",null,[g("("),_e.oomps(),g(")"),s(Lt,{id:"oomps"},null)]):s(N,null,[s("br",null,null)]),j(e)]):null]),tree:e,hotkey:t,progression:n,hotkeyEa:i,hotkeyEb:r,upgrades:a}}),tl=n=>[We,_e,Re],it=F(()=>!1);function $e(n={}){return Object.assign({id:`${H.id}-0`,name:"Default Save",tabs:H.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:H.id,devSpeed:1,modVersion:H.versionNumber,layers:{}},n)}function ie(n){const e=Fe.compressToUTF16(Ke(n??$));return localStorage.setItem((n??$).id,e),e}async function nl(){al();try{let n=localStorage.getItem(L.active);if(n==null){await xe(Qe());return}if(n=Ve(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==H.id){await xe(Qe());return}e.id=L.active,await xe(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await xe(Qe())}}function Ve(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="á¯¡")n=Fe.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function Qe(){const n=Je(),e=$e({id:n});return ie(e),L.saves.push(n),e}function Je(){let n,e=0;do n=`${H.id}-${e++}`;while(localStorage.getItem(n)!=null);return n}const qt=R(!1);async function xe(n){console.info("Loading save",n),qt.value=!0;for(const e in he){const t=he[e];t!=null&&ea(t)}tl().forEach(e=>Xr(e,n)),n=$e(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,H.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==H.versionNumber&&(n.modVersion,n.modVersion=H.versionNumber),Object.assign($,n),L.active=$.id,oe.emit("onLoad")}const Ne=Et({});function Si(n){if(Ne[n]==null){let e=localStorage.getItem(n);if(e==null)Ne[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")Ne[n]={error:"Save is undefined",id:n};else try{if(e=Ve(e),e==null)return console.warn("Unable to determine preset encoding",e),Ne[n]={error:"Unable to determine preset encoding",id:n},Ne[n];Ne[n]={...JSON.parse(e),id:n}}catch(t){Ne[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return Ne[n]}function il(){Object.keys(Ne).forEach(n=>delete Ne[n])}function Le(n){Ne[n]=void 0}setInterval(()=>{$.autosave&&ie()},1e3);window.onbeforeunload=()=>{$.autosave&&ie()};window.save=ie;const rl=window.hardReset=async()=>{await xe(Qe())};window.deleteLowerSaves=()=>{const n=Object.values(L.saves).indexOf($.id)+1;Object.values(L.saves).slice(n).forEach(e=>localStorage.removeItem(e)),L.saves=L.saves.slice(0,n)};const vt=ot({active:"",saves:[],showTPS:!0,theme:fn.Paper,unthrottled:!1,alignUnits:!1,bigModal:!1,engineering:!1,insanePrecision:!1,blindNumbers:!1,letterNumbers:!1,infinityNumbers:!1,yesnoNumbers:!1,standardThreshold:3,scientificThreshold:5,logarithmicThreshold:8,letters:"",precisionBonus:2,language:"en",appendLayers:!1,showHealthWarning:!0,e:!1});be(vt,n=>{const e=Fe.compressToUTF16(JSON.stringify(n));localStorage.setItem(H.id,e)},{deep:!0});const L=window.settings=vt;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!0,theme:fn.Nordic,alignUnits:!1,bigModal:!1,engineering:!1,insanePrecision:!1,blindNumbers:!1,letterNumbers:!1,infinityNumbers:!1,yesnoNumbers:!1,standardThreshold:3,scientificThreshold:5,logarithmicThreshold:8,letters:"",precisionBonus:2,appendLayers:!1,unthrottled:!1,showHealthWarning:!0,e:!1};oe.emit("loadSettings",n),Object.assign(vt,n),rl()};function al(){try{let n=localStorage.getItem(H.id);if(n!=null&&n!==""){if(n=Ve(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(vt,e)}oe.emit("loadSettings",vt)}catch{}}const sl=ot([]),ki=ot([]);function ol(n){ki.push(n)}const ll=ot([]),ul={class:"field"},cl={key:0,class:"field-title"},dt=J({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title?j(t.title,o=>s("span",null,[o])):s(N,null,null),a=R(t.options.find(o=>o.value===t.modelValue)??null);be(Ye(t,"modelValue"),o=>{u(a)!==o&&(a.value=t.options.find(c=>c.value===o)??null)});function d(o){i("update:modelValue",o.value)}return(o,c)=>(k(),T("div",ul,[o.title?(k(),T("span",cl,[s(r)])):O("",!0),s(u(ar),{options:o.options,modelValue:a.value,"onUpdate:modelValue":[c[0]||(c[0]=p=>a.value=p),d],min:1,placeholder:o.placeholder,"close-on-select":o.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}}),dl={class:"field"},fl={key:0,class:"field-title"},gl=["placeholder"],ml=J({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title==null?s(N,null,null):j(t.title,p=>s("span",null,[p])),a=Ot(null),d=F({get(){return u(t.modelValue)??""},set(p){i("update:modelValue",p)}});function o(){i("submit")}function c(){t.submitOnBlur!==!1?i("submit"):i("cancel")}return(p,y)=>(k(),T("form",{onSubmit:ft(o,["prevent"])},[m("div",dl,[p.title?(k(),T("span",fl,[s(r)])):O("",!0),p.textArea?(k(),X(u(sr),{key:1,modelValue:d.value,"onUpdate:modelValue":y[0]||(y[0]=b=>d.value=b),placeholder:p.placeholder,maxHeight:p.maxHeight,onBlur:c,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):cn((k(),T("input",{key:2,type:"text","onUpdate:modelValue":y[1]||(y[1]=b=>d.value=b),placeholder:p.placeholder,class:ee({fullWidth:!p.title}),onBlur:c,ref_key:"field",ref:a},null,42,gl)),[[Xi,d.value]])])],32))}}),Vt=te(ml,[["__scopeId","data-v-490563c4"]]),pl={key:0},vl=["disabled"],hl={key:0},bl=J({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,i=e,r=R(!1);be(r,o=>{i("confirmingChanged",o)});function a(){if(t.skipConfirm){i("click");return}r.value&&i("click"),r.value=!r.value}function d(){r.value=!1}return(o,c)=>(k(),T("span",{class:ee(["container",{confirming:r.value}])},[r.value?(k(),T("span",pl,"Are you sure?")):O("",!0),m("button",{onClick:ft(a,["stop"]),class:"button danger",disabled:o.disabled},[r.value?(k(),T("span",hl,"Yes")):Ce(o.$slots,"default",{key:1},void 0,!0)],8,vl),r.value?(k(),T("button",{key:1,class:"button",onClick:ft(d,["stop"])},"No")):O("",!0)],2))}}),yl=te(bl,[["__scopeId","data-v-f2bed6c7"]]),fe=R(),Se=R([]),Ze=R([]);function wl(){var n;((n=fe.value)==null?void 0:n.loggedIn)===!0&&(Se.value.length>0||fe.value.getSaveList().then(xi).then(e=>{Ze.value=e.map(t=>t.content.id)}).catch(console.error))}or({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:En}).then(n=>{fe.value=n,En(n)}).catch(console.error);function En(n){n.loggedIn===!0&&(Se.value.length>0||(n.getSaveList().then(e=>{const t=xi(e);if(Ze.value=t.map(i=>i.content.id),$.timePlayed<120*1e3&&t.length>0){const i=t.reduce((r,a)=>r.content.time<a.content.time?a:r);xe(i.content)}}).catch(console.error),setInterval(wl,60*1e3)))}function xi(n){const e=new Set(L.saves.slice()),t=new Set(new Array(11).fill(0).map((r,a)=>a)),i=Object.keys(n).map(r=>{const{label:a,content:d}=n[parseInt(r)];try{return{slot:parseInt(r),label:a,content:JSON.parse(Ve(d)??"")}}catch{return null}}).filter(r=>r!=null&&typeof r.content.id=="string"&&typeof r.content.time=="number"&&typeof r.content.timePlayed=="number").filter(r=>{var d;r.label!=null&&(r.content.name=r.label),t.delete(r.slot);const a=L.saves.find(o=>o===r.content.id);if(a==null)L.saves.push(r.content.id),ie($e(r.content));else{e.delete(a);try{const o=JSON.parse(Ve(localStorage.getItem(a)??"")??"");if(o==null)return!1;o.id=a,o.time=o.time??0,o.timePlayed=o.timePlayed??0;const c=Math.abs(o.timePlayed-r.content.timePlayed),p=Math.abs(o.time-r.content.time);c<120*1e3&&p<120*1e3?o.time<r.content.time?(ie($e(r.content)),L.active===a&&xe(r.content)):((d=fe.value)==null||d.save(r.slot,Fe.compressToUTF16(Ke($e(o))),o.name??r.label).catch(console.error),r.content=o):Se.value.push({id:a,cloud:r.content,local:o,slot:r.slot})}catch{return!1}}return!0});return e.forEach(r=>{var a;try{if(t.size>0){const d=localStorage.getItem(r)??"",o=JSON.parse(Ve(d)??""),c=t.values().next().value;if(c==null)return;(a=fe.value)==null||a.save(c,d,o.name).then(()=>Ze.value.push(o.id)).catch(console.error),t.delete(c)}}catch{}}),i}const Nl={key:0,class:"handle material-icons"},Cl={key:1,class:"actions"},Sl={key:2,class:"actions"},kl={key:3,class:"details"},xl=["disabled"],Il=["disabled"],Ml=["disabled"],Tl={key:4,class:"details"},Pl={key:5,class:"details error"},$l=J({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,i=e,r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=R(!1),d=R(!1),o=R("");be(a,()=>o.value=t.save.name??"");const c=F(()=>t.save!=null&&t.save.id===$.id&&!t.readonly),p=F(()=>c.value?$.time:(t.save!=null&&t.save.time)??0),y=F(()=>{var w;return!t.readonly&&((w=fe.value)==null?void 0:w.loggedIn)===!0&&Ze.value.includes(t.save.id)});function b(){i("editName",o.value),a.value=!1}return(w,v)=>(k(),T("div",{class:ee(["save",{active:c.value,readonly:w.readonly}])},[w.readonly!==!0?(k(),T("div",Nl,"drag_handle")):O("",!0),!a.value&&w.readonly!==!0?(k(),T("div",Cl,[w.save.error==null&&!d.value?(k(),X(dn,{key:0,onClick:v[0]||(v[0]=S=>i("export")),class:"button",left:""},{default:G(()=>[s(le,{display:"Export",direction:u(ue).Left,class:"info"},{default:G(()=>v[11]||(v[11]=[m("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):O("",!0),w.save.error==null&&!d.value?(k(),T("button",{key:1,onClick:v[1]||(v[1]=S=>i("duplicate")),class:"button"},[s(le,{display:"Duplicate",direction:u(ue).Left,class:"info"},{default:G(()=>v[12]||(v[12]=[m("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):O("",!0),w.save.error==null&&!d.value?(k(),T("button",{key:2,onClick:v[2]||(v[2]=S=>a.value=!a.value),class:"button"},[s(le,{display:"Edit Name",direction:u(ue).Left,class:"info"},{default:G(()=>v[13]||(v[13]=[m("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):O("",!0),s(yl,{disabled:c.value,onClick:v[3]||(v[3]=S=>i("delete")),onConfirmingChanged:v[4]||(v[4]=S=>d.value=S)},{default:G(()=>[s(le,{display:"Delete",direction:u(ue).Left,class:"info"},{default:G(()=>v[14]||(v[14]=[m("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):w.readonly!==!0?(k(),T("div",Sl,[m("button",{onClick:b,class:"button"},[s(le,{display:"Save",direction:u(ue).Left,class:"info"},{default:G(()=>v[15]||(v[15]=[m("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),m("button",{onClick:v[5]||(v[5]=S=>a.value=!a.value),class:"button"},[s(le,{display:"Cancel",direction:u(ue).Left,class:"info"},{default:G(()=>v[16]||(v[16]=[m("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):O("",!0),w.save.error==null&&!a.value?(k(),T("div",kl,[y.value?(k(),X(le,{key:0,display:"Synced!",direction:u(ue).Right,onClick:v[6]||(v[6]=S=>i("open")),disabled:w.readonly},{default:G(()=>v[17]||(v[17]=[m("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction","disabled"])):O("",!0),m("button",{class:"button open",onClick:v[7]||(v[7]=S=>i("open")),disabled:w.readonly},[m("h3",null,Q(w.save.name),1)],8,xl),m("span",{class:"save-version",onClick:v[8]||(v[8]=S=>i("open")),disabled:w.readonly},"v"+Q(w.save.modVersion),9,Il),v[18]||(v[18]=m("br",null,null,-1)),p.value?(k(),T("div",{key:1,class:"time",onClick:v[9]||(v[9]=S=>i("open")),disabled:w.readonly}," Last played "+Q(u(r).format(p.value)),9,Ml)):O("",!0)])):w.save.error==null&&a.value?(k(),T("div",Tl,[s(Vt,{modelValue:o.value,"onUpdate:modelValue":v[10]||(v[10]=S=>o.value=S),class:"editname",onSubmit:b},null,8,["modelValue"])])):(k(),T("div",Pl,[g(" Error: Failed to load save with id "+Q(w.save.id),1),v[19]||(v[19]=m("br",null,null,-1)),g(Q(w.save.error),1)]))],2))}}),Ft=te($l,[["__scopeId","data-v-d16a1289"]]),Vl={key:0,style:{color:"var(--danger)"}},Fl={class:"modal-footer"},Al={class:"field"},El={class:"field-buttons"},Ol={class:"footer"},_l=J({__name:"SavesManager",setup(n,{expose:e}){const t=R(!1),i=R(null);e({open(){t.value=!0}});const r=R(!1),a=R(""),d=R(null);be(a,x=>{x?rt(()=>{try{if(x=Ve(x)??"",x===""){console.warn("Unable to determine preset encoding",x),r.value=!0;return}const V=JSON.parse(x);if(typeof V!="object"){r.value=!0;return}const _=Je();V.id=_,ie(V),a.value="",r.value=!1,L.saves.push(_)}catch{r.value=!0}}):r.value=!1});let o=Object.assign({}),c=R(Object.keys(o).reduce((x,V)=>(x.push({label:V.split("/").slice(-1)[0].slice(0,-4),value:o[V]}),x),[]));be(t,x=>{x&&il()});const p=F(()=>L.saves.reduce((x,V)=>(x[V]=Si(V),x),{})),y=F(()=>{var x;return((x=fe.value)==null?void 0:x.loggedIn)===!0&&L.saves.length<Ze.value.length});function b(x){let V;switch($.id===x?V=Ke($):V=JSON.stringify(p.value[x]),H.exportEncoding){default:console.warn(`Unknown save encoding: ${H.exportEncoding}. Defaulting to lz`);case"lz":V=Fe.compressToUTF16(V);break;case"base64":V=btoa(unescape(encodeURIComponent(V)));break;case"plain":break}const _=document.createElement("textarea");_.value=V,document.body.appendChild(_),_.select(),_.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(_)}function w(x){$.id===x&&ie();const V={...p.value[x],id:Je()};ie(V),L.saves.push(V.id)}function v(x){var V;((V=fe.value)==null?void 0:V.loggedIn)===!0&&fe.value.getSaveList().then(_=>{var pe;const ne=Object.keys(_).find(Ae=>{const Ut=_[parseInt(Ae)].content;try{if(JSON.parse(Ut).id===x)return!0}catch{return!1}});ne!=null&&((pe=fe.value)==null||pe.save(parseInt(ne),"","").catch(console.error))}),L.saves=L.saves.filter(_=>_!==x),localStorage.removeItem(x),Le(x)}function S(x){p.value[$.id].time=$.time,ie(),Le($.id),xe(p.value[x]),Le(x)}function M(x){if(d.value=x,rt(()=>{d.value=null}),x=Ve(x)??"",x===""){console.warn("Unable to determine preset encoding",x);return}const V=JSON.parse(x);V.id=Je(),ie(V),L.saves.push(V.id),S(V.id)}function A(x,V){const _=p.value[x];_!=null&&(_.name=V,$.id===x?($.name=V,ie()):(ie(_),Le(x)))}return(x,V)=>(k(),X(ze,{modelValue:t.value,"onUpdate:modelValue":V[4]||(V[4]=_=>t.value=_),ref_key:"modal",ref:i},{header:G(()=>V[5]||(V[5]=[m("div",{class:"header"},[m("h2",null,"Saves Manager")],-1)])),body:G(({shown:_})=>[y.value?(k(),T("div",Vl," Not all saves are synced! You may need to delete stale saves. ")):O("",!0),_?(k(),X(u(Un),{key:1,list:u(L).saves,handle:".handle",itemKey:ne=>ne},{item:G(({element:ne})=>[s(Ft,{save:p.value[ne],onOpen:pe=>S(ne),onExport:pe=>b(ne),onEditName:pe=>A(ne,pe),onDuplicate:pe=>w(ne),onDelete:pe=>v(ne)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):O("",!0)]),footer:G(()=>[m("div",Fl,[s(Vt,{modelValue:a.value,"onUpdate:modelValue":V[0]||(V[0]=_=>a.value=_),title:"Import Save",placeholder:"Paste your save here!",class:ee({importingFailed:r.value})},null,8,["modelValue","class"]),m("div",Al,[V[6]||(V[6]=m("span",{class:"field-title"},"Create Save",-1)),m("div",El,[m("button",{class:"button",onClick:V[1]||(V[1]=_=>S(u(Qe)().id))},"New Game"),Object.keys(u(c)).length>0?(k(),X(dt,{key:0,options:u(c),modelValue:d.value,"onUpdate:modelValue":V[2]||(V[2]=_=>M(_)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):O("",!0)])]),m("div",Ol,[V[7]||(V[7]=m("div",{style:{"flex-grow":"1"}},null,-1)),m("button",{class:"button modal-default-button",onClick:V[3]||(V[3]=_=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),kn=te(_l,[["__scopeId","data-v-8dd620d8"]]),Dl=J({__name:"AddictionWarning",setup(n){const e=R(!1);return Ln(()=>{H.disableHealthWarning===!1&&L.showHealthWarning&&Y.mouseActivity.filter(t=>t).length>6&&(e.value=!0)}),(t,i)=>(k(),T(N,null,[s(ze,Be({modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=r=>e.value=r)},t.$attrs),{header:G(()=>i[1]||(i[1]=[m("div",{class:"vga-modal-header"},[m("h2",null,"Kindly consider taking a break.")],-1)])),body:G(()=>i[2]||(i[2]=[m("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),m("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),m("h4",null,"Resources:",-1),m("p",null,[m("span",null,[m("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),g(" ("),m("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),g(") ")]),m("br"),m("a",{href:"https://www.reddit.com/r/StopGaming/",target:"_blank"},"r/StopGaming")],-1)])),_:1},16,["modelValue"]),s(kn,{ref:"savesManager"},null,512)],64))}}),Rl=te(Dl,[["__scopeId","data-v-015cc0b8"]]),Ll={class:"cloud-saves-modal-header"},ql=["onClick"],Ul={key:0,class:"note"},Bl={key:1,class:"note"},zl=["onClick"],Gl={key:0,class:"note"},jl={key:1,class:"note"},Hl=["onClick"],Wl=J({__name:"CloudSaveResolver",setup(n){const e=R(!1),t=R([]),i=F(()=>Se.value.length>1?"saves":"save"),r=R(null);be(()=>Se.value.length>0,p=>{p&&(t.value=Se.value.map(({local:y,cloud:b})=>(y.time??0)<(b.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),be(()=>{var p;return(p=r.value)==null?void 0:p.isOpen},p=>{p===!1&&(Se.value=[])});function a(p){t.value[p]="local"}function d(p){t.value[p]="cloud"}function o(p){t.value[p]="both"}function c(){var p,y;for(let b=0;b<t.value.length;b++){const{slot:w,local:v,cloud:S}=Se.value[b];switch(t.value[b]){case"local":(p=fe.value)==null||p.save(w,Fe.compressToUTF16(Ke($e(v))),S.name).catch(console.error);break;case"cloud":ie($e(S));break;case"both":const M=Je();ie({...$e(S),id:M}),L.saves.push(M),(y=fe.value)==null||y.save(w,Fe.compressToUTF16(Ke($e(v))),S.name).catch(console.error);break}}e.value=!1}return(p,y)=>(k(),X(ze,{modelValue:e.value,"onUpdate:modelValue":y[0]||(y[0]=b=>e.value=b),width:"960px",ref_key:"modal",ref:r,"prevent-closing":!0},{header:G(()=>[m("div",Ll,[m("h2",null,"Cloud "+Q(i.value)+" loaded!",1)])]),body:G(()=>[m("div",null," Upon loading, your cloud "+Q(i.value)+" "+Q(u(Se).length>1?"appear":"appears")+" to be out of sync with your local "+Q(i.value)+". Which "+Q(i.value)+" do you want to keep? ",1),y[4]||(y[4]=m("br",null,null,-1)),(k(!0),T(N,null,De(u(u(Se)),(b,w)=>(k(),T("div",{key:b.id,class:"conflict-container"},[m("div",{onClick:v=>d(w),class:ee({selected:t.value[w]==="cloud"})},[m("h2",null,[y[1]||(y[1]=g(" Cloud ")),(b.cloud.time??0)>(b.local.time??0)?(k(),T("span",Ul,"(more recent)")):O("",!0),(b.cloud.timePlayed??0)>(b.local.timePlayed??0)?(k(),T("span",Bl,"(more playtime)")):O("",!0)]),s(Ft,{save:b.cloud,readonly:!0},null,8,["save"])],10,ql),m("div",{onClick:v=>a(w),class:ee({selected:t.value[w]==="local"})},[m("h2",null,[y[2]||(y[2]=g(" Local ")),(b.cloud.time??0)<=(b.local.time??0)?(k(),T("span",Gl,"(more recent)")):O("",!0),(b.cloud.timePlayed??0)<=(b.local.timePlayed??0)?(k(),T("span",jl,"(more playtime)")):O("",!0)]),s(Ft,{save:b.local,readonly:!0},null,8,["save"])],10,zl),m("div",{onClick:v=>o(w),class:ee({selected:t.value[w]==="both"}),style:{"flex-basis":"30%"}},y[3]||(y[3]=[m("h2",null,"Both",-1),m("div",{class:"save"},"Keep Both",-1)]),10,Hl)]))),128))]),footer:G(()=>[m("div",{class:"cloud-saves-footer"},[m("button",{onClick:c,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),Ql=te(Wl,[["__scopeId","data-v-c79a1b2e"]]),Jl={class:"field"},Yl=J({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>j(t.title??"",d=>s("span",null,[d])),a=F({get(){return!!t.modelValue},set(d){i("update:modelValue",d)}});return(d,o)=>(k(),T("label",Jl,[cn(m("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=c=>a.value=c)},null,512),[[er,a.value]]),s(r)]))}}),ye=te(Yl,[["__scopeId","data-v-faad62a6"]]),Kl={class:"game-over-modal-header"},Zl=["src","alt"],Xl={class:"game-over-modal-title"},eu={key:0},tu={key:0},nu=["href"],iu={key:1},ru=J({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:i,discordLink:r,versionNumber:a,versionTitle:d}=H,o=()=>j(hn($.timePlayed)),c=F(()=>it.value&&!$.keepGoing),p=Ye($,"autosave");function y(){$.keepGoing=!0}function b(){xe(Qe())}return(w,v)=>(k(),X(ze,{"model-value":c.value},{header:G(()=>[m("div",Kl,[u(t)?(k(),T("img",{key:0,class:"game-over-modal-logo",src:u(t),alt:u(e)},null,8,Zl)):O("",!0),m("div",Xl,[v[1]||(v[1]=m("h2",null,"Congratulations!",-1)),m("h4",null,"You've beaten "+Q(u(e))+" v"+Q(u(a))+": "+Q(u(d)),1)])])]),body:G(({shown:S})=>[S?(k(),T("div",eu,[m("div",null,[v[2]||(v[2]=g("It took you ")),s(o),v[3]||(v[3]=g(" to beat the game."))]),v[6]||(v[6]=m("br",null,null,-1)),v[7]||(v[7]=m("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),v[8]||(v[8]=m("br",null,null,-1)),u(r)&&u(i)?(k(),T("div",tu,[m("a",{href:u(r),class:"game-over-modal-discord-link"},[v[4]||(v[4]=m("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),g(" "+Q(u(i)),1)],8,nu)])):(k(),T("div",iu,v[5]||(v[5]=[m("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[m("span",{class:"material-icons game-over-modal-discord"},"discord"),g(" Profectus & Friends ")],-1)]))),s(ye,{title:"Autosave",modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=M=>p.value=M)},null,8,["modelValue"])])):O("",!0)]),footer:G(()=>[m("div",{class:"game-over-footer"},[m("button",{onClick:y,class:"button"},"Keep Going"),m("button",{onClick:b,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),au=te(ru,[["__scopeId","data-v-ecc080c1"]]),su={class:"nan-modal-header"},ou={key:0},lu={key:0},uu=["href"],cu={class:"nan-footer"},du=J({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=H,i=R(!0),r=R(!0),a=Ye(Y,"hasNaN"),d=R(null);be(a,v=>{v?(i.value=$.autosave,r.value=$.devSpeed===0):($.autosave=i.value,$.devSpeed=r.value?0:null)});const o=F(()=>{var v;return(v=Y.NaNPath)==null?void 0:v.join(".")}),c=F(()=>Y.NaNPersistent!=null?Y.NaNPersistent.value:null),p=()=>j(ae(c.value??1));function y(){Y.NaNPersistent!=null&&(Y.NaNPersistent.value=new l(0),Y.hasNaN=!1)}function b(){Y.NaNPersistent&&(Y.NaNPersistent.value=new l(1),Y.hasNaN=!1)}function w(){Y.NaNPersistent&&(Y.NaNPersistent.value=new l(NaN),Y.hasNaN=!1)}return(v,S)=>(k(),T(N,null,[s(ze,Be({modelValue:a.value,"onUpdate:modelValue":S[4]||(S[4]=M=>a.value=M)},v.$attrs),{header:G(()=>[m("div",su,[S[7]||(S[7]=m("h2",null,"NaN value detected!",-1)),m("h4",null,[g(Q(o.value),1),c.value?(k(),T("span",ou,[S[5]||(S[5]=g(" // ")),s(p),S[6]||(S[6]=g(" -> NaN"))])):O("",!0)])])]),body:G(()=>[m("div",null,[g(' Attempted to assign "'+Q(o.value)+'" to NaN',1),c.value?(k(),T("span",lu,[S[8]||(S[8]=g(Q(" ")+"(previously ")),s(p),S[9]||(S[9]=g(")"))])):O("",!0),g(". Auto-saving has been "+Q(i.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),S[11]||(S[11]=m("br",null,null,-1)),m("div",null,[m("a",{href:u(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[S[10]||(S[10]=m("span",{class:"material-icons nan-modal-discord"},"discord",-1)),g(" "+Q(u(e)||"Profectus & Friends"),1)],8,uu)]),S[12]||(S[12]=m("br",null,null,-1)),s(ye,{title:"Autosave",modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=M=>i.value=M)},null,8,["modelValue"]),u(H).enablePausing?(k(),X(ye,{key:0,title:"Pause game",modelValue:r.value,"onUpdate:modelValue":S[1]||(S[1]=M=>r.value=M)},null,8,["modelValue"])):O("",!0)]),footer:G(()=>[m("div",cu,[m("button",{onClick:S[2]||(S[2]=M=>{var A;return(A=d.value)==null?void 0:A.open()}),class:"button"},"Open Saves Manager"),m("button",{onClick:y,class:"button"},"Set to 0"),m("button",{onClick:b,class:"button"},"Set to 1"),c.value&&u(l).neq(c.value,0)&&u(l).neq(c.value,1)?(k(),T("button",{key:0,onClick:S[3]||(S[3]=M=>a.value=!1),class:"button"}," Set to previous ")):O("",!0),m("button",{onClick:w,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),s(kn,{ref_key:"savesManager",ref:d},null,512)],64))}}),fu=te(du,[["__scopeId","data-v-43ca4dba"]]),gu={key:1},mu=J({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},setup(n){const e=n,t=()=>j(e.display),i=()=>e.minimizedDisplay==null?void 0:j(e.minimizedDisplay),r=F(()=>H.allowGoBack&&!u(e.forceHideGoBack)&&e.index>0&&!u(e.minimized));function a(){$.tabs.splice(u(e.index),1/0)}function d(c){e.nodes.value=c}const o=R([]);return tr((c,p,y)=>(console.warn(`Error caught in "${e.name}" layer`,c,p,y),o.value.push(c instanceof Error?c:new Error(JSON.stringify(c))),!1)),(c,p)=>o.value.length>0?(k(),X(Bn,{key:0,errors:o.value},null,8,["errors"])):(k(),T("div",Be({key:1,class:"layer-container",style:{"--layer-color":u(c.color)}},c.$attrs),[r.value?(k(),T("button",{key:0,class:"goBack material-icons",onClick:a},"close")):O("",!0),u(c.minimized)?(k(),T("button",{key:1,class:"layer-tab minimized",onClick:p[0]||(p[0]=y=>c.$emit("setMinimized",!1))},[c.minimizedDisplay?(k(),X(i,{key:0})):(k(),T("div",gu,Q(u(c.name)),1))])):(k(),T("div",{key:2,class:ee(["layer-tab",{showGoBack:r.value}])},[s(zn,{onUpdateNodes:d},{default:G(()=>[s(t)]),_:1})],2)),u(c.minimizable)?(k(),T("button",{key:3,class:"minimize",onClick:p[1]||(p[1]=y=>c.$emit("setMinimized",!0))}," â¼ ")):O("",!0)],16))}}),pu=te(mu,[["__scopeId","data-v-cfdd94bc"]]),vu={},hu={id:"changelog"};function bu(n,e){return k(),T("div",hu,e[0]||(e[0]=[nr('<details data-v-c9a717ad><summary class="major" data-v-c9a717ad>Rebirth - <time data-v-c9a717ad>2024-04-04</time></summary> Initial release <ul data-v-c9a717ad><li class="feature" data-v-c9a717ad>Cash</li><li class="feature" data-v-c9a717ad>Rebirth</li><li class="feature" data-v-c9a717ad>The Machine</li><li class="feature" data-v-c9a717ad>Achievements</li></ul></details><details data-v-c9a717ad><summary class="major" data-v-c9a717ad>Super - <time data-v-c9a717ad>2024-04-07</time></summary> Addition of Super Rebirth <ul data-v-c9a717ad><li class="feature" data-v-c9a717ad>Super Rebirth</li><li class="feature" data-v-c9a717ad>Secret Achievements</li><li class="fix" data-v-c9a717ad>Fixed a NaN bug</li></ul></details><details data-v-c9a717ad><summary class="minor" data-v-c9a717ad>Power - <time data-v-c9a717ad>2024-04-09</time></summary> Addition of Power <ul data-v-c9a717ad><li class="feature" data-v-c9a717ad>Power</li><li class="feature" data-v-c9a717ad>Challenges</li><li class="feature" data-v-c9a717ad>Pylons</li></ul></details><details data-v-c9a717ad><summary class="major" data-v-c9a717ad>Hyper - <time data-v-c9a717ad>2024-04-13</time></summary> Addition of Hyper Rebirth <ul data-v-c9a717ad><li class="feature" data-v-c9a717ad>Hyper Rebirth</li><li class="feature" data-v-c9a717ad>Hyper Cash</li><li class="feature" data-v-c9a717ad>Hyper Paths</li><li class="fix" data-v-c9a717ad>Fixed Power unlock</li><li class="change" data-v-c9a717ad>Changed some text</li><li class="change" data-v-c9a717ad>Changed challenge visuals</li><li class="change" data-v-c9a717ad>Rebalanced Power</li></ul></details><details data-v-c9a717ad><summary class="minor" data-v-c9a717ad>Matter - <time data-v-c9a717ad>2024-05-15</time></summary> Addition of the Matters <ul data-v-c9a717ad><li class="feature" data-v-c9a717ad>Matter Paths</li><li class="feature" data-v-c9a717ad>Matter</li><li class="feature" data-v-c9a717ad>Antimatter</li><li class="feature" data-v-c9a717ad>Dark Matter &amp; Black Hole</li><li class="feature" data-v-c9a717ad>Exotic Matter &amp; Hypotheory</li><li class="feature" data-v-c9a717ad>Hotkeys</li><li class="fix" data-v-c9a717ad>Fixed multiple NaN bugs</li><li class="fix" data-v-c9a717ad>Fixed multiple typos</li><li class="fix" data-v-c9a717ad>Fixed a certain Power milestone</li><li class="change" data-v-c9a717ad>Softcap visual overhaul</li></ul></details><details open data-v-c9a717ad><summary class="majorer" data-v-c9a717ad>Universal - <time data-v-c9a717ad>202X-XX-XX</time></summary> Port to Profectus, Rebalance, and Addition of Universes <ul data-v-c9a717ad><li class="breaking" data-v-c9a717ad>Ported to Profectus</li><li class="breaking" data-v-c9a717ad>Fully rebalanced existing content</li><li class="feature" data-v-c9a717ad>Many Notation Options</li><li class="feature" data-v-c9a717ad>Breakdown Modals</li><li class="feature" data-v-c9a717ad>Help Menu</li><li class="feature" data-v-c9a717ad>This Changelog</li><li class="feature" data-v-c9a717ad>Save Bank</li><li class="feature" data-v-c9a717ad>Auto Machine</li><li class="feature" data-v-c9a717ad>Universal Time</li><li class="fix" data-v-c9a717ad>Fixed Most NaN Bugs</li><li class="fix" data-v-c9a717ad>Fixed Multiple Typos (Hopefully)</li><li class="change" data-v-c9a717ad>Changed Various Colours</li><li class="change" data-v-c9a717ad>Changed Achievements</li><li class="change" data-v-c9a717ad>Changed Certain Other Features</li></ul></details>',6)]))}const yu=te(vu,[["render",bu],["__scopeId","data-v-c9a717ad"]]),wu={class:"info-modal-header"},Nu=["src","alt"],Cu={class:"info-modal-title"},Su={key:0},ku={class:"option-tabs"},xu={key:0},Iu={key:0},Mu={key:1},Tu={key:2},Pu={key:3},$u={style:{"margin-left":"12px","margin-top":"12px"},tab:"links"},Vu=["href"],Fu=J({__name:"Info",emits:["openChangelog"],setup(n,{expose:e,emit:t}){const{title:i,logo:r,author:a,discordName:d,discordLink:o,versionNumber:c,versionTitle:p}=H,y=R(!1),b=()=>j(hn($.timePlayed,!0)),w=()=>ki.map(A=>j(A)),v=R("hotkeys");function S(A){return A==v.value}function M(A){v.value=A}return e({isTab:S,setTab:M,open(){y.value=!0}}),(A,x)=>(k(),X(ze,{modelValue:y.value,"onUpdate:modelValue":x[4]||(x[4]=V=>y.value=V)},{header:G(()=>[m("div",wu,[u(r)?(k(),T("img",{key:0,class:"info-modal-logo",src:u(r),alt:u(i)},null,8,Nu)):O("",!0),m("div",Cu,[m("h2",null,Q(u(i)),1),m("h4",null,[g(" v"+Q(u(c)),1),u(p)?(k(),T("span",Su,": "+Q(u(p)),1)):O("",!0)])]),m("div",ku,[m("button",{class:ee({selected:S("hotkeys")}),onClick:x[0]||(x[0]=V=>M("hotkeys"))},"Misc",2),m("button",{class:ee({selected:S("credits")}),onClick:x[1]||(x[1]=V=>M("credits"))},"Credits",2),m("button",{class:ee({selected:S("changelog")}),onClick:x[2]||(x[2]=V=>M("changelog"))},"Changelog",2),m("button",{class:ee({selected:S("links")}),onClick:x[3]||(x[3]=V=>M("links"))},"Links",2)])])]),body:G(({shown:V})=>[V?(k(),T("div",xu,[S("hotkeys")?(k(),T("div",Iu,[m("div",null,[x[5]||(x[5]=g("Time Played: ")),s(b)]),s(w)])):O("",!0),S("credits")?(k(),T("div",Mu,x[6]||(x[6]=[m("div",null,[g("Created by:"),m("br"),m("a",{target:"_blank",href:"https://banacubed.github.io/",style:{width:"fit-content",display:"inline"}},[m("span",{class:"material-icons user-thingy"},"lightbulb terminal palette"),g("BanaCubed")]),m("br"),m("span",{style:{width:"fit-content",display:"inline"}},[m("span",{class:"material-icons user-thingy"},"lightbulb palette"),g("adoplayzz")]),m("br"),m("span",{style:{width:"fit-content",display:"inline"}},[m("span",{class:"material-icons user-thingy"},"lightbulb"),g("Create_Incremental_Boy")]),m("br"),m("span",{style:{width:"fit-content",display:"inline"}},[m("span",{class:"material-icons user-thingy"},"lightbulb"),g("EchoingLycanthrope")]),m("br"),m("span",{style:{width:"fit-content",display:"inline"}},[m("span",{class:"material-icons user-thingy"},"lightbulb"),g("EdenGameMaster")]),m("br"),m("span",{style:{width:"fit-content",display:"inline"}},[m("span",{class:"material-icons user-thingy"},"lightbulb"),g("galaxyuser63274")]),m("br"),m("span",{style:{width:"fit-content",display:"inline"}},[m("span",{class:"material-icons user-thingy"},"lightbulb"),g("Shadow69420")]),m("br"),m("br"),m("span",{id:"key"},[m("span",{class:"material-icons"},"lightbulb"),g(" Idea // "),m("span",{class:"material-icons"},"terminal"),g(" Code // "),m("span",{class:"material-icons"},"palette"),g(" Art // "),m("span",{class:"material-icons"},"translate"),g(" Translation"),m("br"),g(" For name change or addition of links contact @banacubed on discord"),m("br"),g(" Ideas can be submitted in the "),m("a",{style:{display:"inline",width:"fit-content"},target:"_blank",href:"https://galaxy.click/forum/thread/255"},"original forum"),g(" on galaxy")])],-1),m("br",null,null,-1),m("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)]))):O("",!0),S("changelog")?(k(),T("div",Tu,[s(yu)])):O("",!0),S("links")?(k(),T("div",Pu,[m("div",$u,[x[8]||(x[8]=m("div",null,[m("a",{href:"https://galaxy.click/forum/thread/255",class:"info-modal-discord-link",target:"_blank"},[m("span",{class:"material-icons info-modal-discord"},"forum"),g(" Galaxy Forum Thread ")])],-1)),x[9]||(x[9]=m("div",null,[m("a",{href:"https://github.com/BanaCubed/Create-Incremental/issues",class:"info-modal-discord-link",target:"_blank"},[m("span",{class:"material-icons info-modal-discord"},"bug_report"),g(" Bug Reports ")])],-1)),x[10]||(x[10]=m("br",null,null,-1)),x[11]||(x[11]=m("div",null,[m("a",{href:"https://raw.githack.com/BanaCubed/Create-Incremental/beta-deploy/index.html",class:"info-modal-discord-link",target:"_blank"},[m("span",{class:"material-icons info-modal-discord"},"auto_awesome"),g(" Early Access Version ")])],-1)),x[12]||(x[12]=m("div",null,[m("a",{href:"https://banacubed.github.io/CI-Legacy",class:"info-modal-discord-link",target:"_blank"},[m("span",{class:"material-icons info-modal-discord"},"history"),g(" Legacy Version ")])],-1)),x[13]||(x[13]=m("br",null,null,-1)),m("div",null,[u(o)?(k(),T("a",{key:0,href:u(o),class:"info-modal-discord-link",target:"_blank"},[x[7]||(x[7]=m("span",{class:"material-icons info-modal-discord"},"discord",-1)),g(" "+Q(u(d)),1)],8,Vu)):O("",!0)]),x[14]||(x[14]=m("div",null,[m("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[m("span",{class:"material-icons info-modal-discord"},"discord"),g(" Profectus & Friends ")])],-1)),x[15]||(x[15]=m("div",null,[m("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[m("span",{class:"material-icons info-modal-discord"},"discord"),g(" The Modding Tree ")])],-1))])])):O("",!0)])):O("",!0)]),_:1},8,["modelValue"]))}}),Au=te(Fu,[["__scopeId","data-v-6a564515"]]),Eu={class:"header"},Ou={class:"option-tabs"},_u={key:0},Du={key:1},Ru={key:0,style:{color:"var(--danger)"}},Lu={class:"field"},qu={class:"field-buttons"},Uu={key:2},Bu={key:3},zu={open:""},Gu={open:""},ju={class:"notation-list"},Hu={class:"notation-modifier"},Wu={class:"notation-list"},Qu={class:"notation-modifier"},Ju={class:"notation-modifier"},Yu={class:"notation-modifier"},Ku={class:"notation-list"},Zu={class:"notation-modifier"},Xu={class:"notation-modifier"},ec={open:""},tc={class:"notation-modifier",id:"notation-preview"},nc={key:4,islang:""},ic=J({__name:"Options",setup(n,{expose:e}){L.language=L.language??"en";const t=[["1",s(N,null,[g("Â Â Â Â Â Â Â One")])],["10",s(N,null,[g("Â Â Â Â Â Â Â Ten")])],["e3",s(N,null,[g("Â Â Thousand")])],["e6",s(N,null,[g("Â Â Â Million")])],["e9",s(N,null,[g("Â Â Â Billion")])],["e12",s(N,null,[g("Â Â Trillion")])],["e33",s(N,null,[g("Â Decillion")])],["ee2",s(N,null,[g("Â Â Â Â Googol")])],["e303",s(N,null,[g("Centillion")])],["1.7976931348623159e308",s(N,null,[g("Â Â Infinity")])]];function i(U){let I=s(N,null,null);for(let K=0;K<t.length;K++){const q=t[K];I=s(N,null,[I,s("p",null,[q[1],g(" - "),ae(q[0])])])}return I}const r=()=>j(i()),a=R(!1),d=R("");R(null);let o=Object.assign({});R(Object.keys(o).reduce((U,I)=>(U.push({label:I.split("/").slice(-1)[0].slice(0,-4),value:o[I]}),U),[])),be(d,U=>{U?rt(()=>{try{if(U=Ve(U)??"",U===""){console.warn("Unable to determine preset encoding",U),a.value=!0;return}const I=JSON.parse(U);if(typeof I!="object"){a.value=!0;return}const K=Je();I.id=K,ie(I),d.value="",a.value=!1,L.saves.push(K)}catch{a.value=!0}}):a.value=!1});const c=F(()=>{var U;return((U=fe.value)==null?void 0:U.loggedIn)===!0&&L.saves.length<Ze.value.length}),p=F(()=>L.saves.reduce((U,I)=>(U[I]=Si(I),U),{}));function y(U,I){const K=p.value[U];K!=null&&(K.name=I,$.id===U?($.name=I,ie()):(ie(K),Le(U)))}function b(U){let I;switch($.id===U?I=Ke($):I=JSON.stringify(p.value[U]),H.exportEncoding){default:console.warn(`Unknown save encoding: ${H.exportEncoding}. Defaulting to lz`);case"lz":I=Fe.compressToUTF16(I);break;case"base64":I=btoa(unescape(encodeURIComponent(I)));break;case"plain":break}const K=document.createElement("textarea");K.value=I,document.body.appendChild(K),K.select(),K.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(K)}function w(U){$.id===U&&ie();const I={...p.value[U],id:Je()};ie(I),L.saves.push(I.id)}function v(U){var I;((I=fe.value)==null?void 0:I.loggedIn)===!0&&fe.value.getSaveList().then(K=>{var Ee;const q=Object.keys(K).find(Gi=>{const ji=K[Gi].content;try{if(JSON.parse(ji).id===U)return!0}catch{return!1}});q!=null&&((Ee=fe.value)==null||Ee.save(parseInt(q),"","").catch(console.error))}),L.saves=L.saves.filter(K=>K!==U),localStorage.removeItem(U),Le(U)}function S(U){p.value[$.id].time=$.time,ie(),Le($.id),xe(p.value[U]),Le(U)}const M=R(!1),A=R("behaviour"),x=[{label:"1",value:0},{label:"1e3",value:1},{label:"1e6",value:2},{label:"1e9",value:3},{label:"1e12",value:4}],V=[{label:"1",value:0},{label:"1e3",value:1},{label:"1e6",value:2},{label:"1e9",value:3},{label:"1e12",value:4},{label:"1e33",value:5},{label:"1e100",value:6},{label:"1e303",value:7},{label:"1e1000",value:8}],_=[{label:"+1",value:1},{label:"+2",value:2},{label:"+3",value:3}];function ne(U){return U==A.value}function pe(U){A.value=U}const Ae=ue.Up,Ut=()=>sl.map(U=>j(U)),{showTPS:Mi,language:xc,unthrottled:Bt,alignUnits:zt,engineering:Gt,insanePrecision:jt,blindNumbers:Ht,yesnoNumbers:Wt,letterNumbers:Qt,standardThreshold:Jt,scientificThreshold:Yt,logarithmicThreshold:Kt,letters:Zt,precisionBonus:Xt,infinityNumbers:en}=Mn(L),{autosave:bt,offlineProd:tn}=Mn($),In=F({get(){return $.devSpeed===0},set(U){$.devSpeed=U?0:null}}),Ti=s(N,null,[g("Replaces Scientific with Engineering")]),Pi=s(N,null,[g("Increases decimal places [Configurable]")]),$i=s(N,null,[g("Replaces Standard with Letters [Configurable]")]),Vi=s(N,null,[g("Forces Blind notation")]),Fi=s(N,null,[g("Forces YES/NO notation")]),Ai=s(N,null,[g("Replaces Logarithmic with Infinity")]),Ei=()=>s("span",{class:"option-title"},[L.letterNumbers?"Letters":"Standard"]),Oi=()=>s("span",{class:"option-title"},[L.engineering?"Engineering":"Scientific"]),_i=()=>s("span",{class:"option-title"},[L.infinityNumbers?"Infinity":"Logarithmic"]),Di=s("span",{class:"option-title"},[g("Letters Config"),s("desc",null,[g("Letters used in letters notation.")])]),Ri=s("span",{class:"option-title"},[g("Precision+ Config"),s("desc",null,[g("Decimal places increase.")])]),Li=s("span",{class:"option-title"},[g("Unthrottled"),s("desc",null,[g("Allow the game to run as fast as possible. Not battery friendly.")])]),qi=s("span",{class:"option-title"},[g("Offline Production"),s(le,{display:"Save-specific",direction:ue.Right},{default:()=>[g("*")]}),s("desc",null,[g("Simulate production that occurs while the game is closed.")])]),Ui=s("span",{class:"option-title"},[g("Autosave"),s(le,{display:"Save-specific",direction:ue.Right},{default:()=>[g("*")]}),s("desc",null,[g("Automatically save the game every second or when the game is closed.")])]),Bi=s("span",{class:"option-title"},[g("Pause game"),s(le,{display:"Save-specific",direction:ue.Right},{default:()=>[g("*")]}),s("desc",null,[g("Stop everything from moving."),s("br",null,null),g("Pressing "),s(Ci,{hotkey:We.hotkey},null),g(" toggles this.")])]);s("span",{class:"option-title"},[g("Larger Modals"),s("desc",null,[g("Makes modals bigger. Might have visual bugs.")])]),s("span",{class:"option-title"},[g("Show TPS"),s("desc",null,[g("Show TPS meter at the bottom-left corner of the page.")])]);const zi=s("span",{class:"option-title"},[g("Align modifier units"),s("desc",null,[g("Align numbers to the beginning of the unit in modifier view.")])]);return e({isTab:ne,setTab:pe,save:ie,open(){M.value=!0},format:ae,Decimal:l}),(U,I)=>(k(),X(ze,{modelValue:M.value,"onUpdate:modelValue":I[24]||(I[24]=K=>M.value=K),ref:"modal"},{header:G(()=>[m("div",Eu,[m("h2",null,[g(Q(u(L).e===!0?"s":"S"),1),m("span",{onClick:I[0]||(I[0]=K=>{u(L).e=u(L).e!==!0})},Q(u(L).e===!0?"E":"e"),1),I[25]||(I[25]=g("ttings"))]),m("div",Ou,[m("button",{class:ee({selected:ne("behaviour")}),onClick:I[1]||(I[1]=K=>pe("behaviour"))},"Behaviour",2),m("button",{class:ee({selected:ne("saves")}),onClick:I[2]||(I[2]=K=>pe("saves"))},"Saves",2),m("button",{class:ee({selected:ne("appearance")}),onClick:I[3]||(I[3]=K=>pe("appearance"))},"Appearance",2),m("button",{class:ee({selected:ne("notation")}),onClick:I[4]||(I[4]=K=>pe("notation"))},"Notation",2)])])]),body:G(({shown:K})=>[ne("behaviour")?(k(),T("div",_u,[s(ye,{title:u(Li),modelValue:u(Bt),"onUpdate:modelValue":I[5]||(I[5]=q=>re(Bt)?Bt.value=q:null)},null,8,["title","modelValue"]),u(H).enablePausing?(k(),X(ye,{key:0,title:u(Bi),modelValue:In.value,"onUpdate:modelValue":I[6]||(I[6]=q=>In.value=q)},null,8,["title","modelValue"])):O("",!0),s(ye,{title:u(qi),modelValue:u(tn),"onUpdate:modelValue":I[7]||(I[7]=q=>re(tn)?tn.value=q:null)},null,8,["title","modelValue"])])):O("",!0),ne("saves")?(k(),T("div",Du,[c.value?(k(),T("div",Ru," Not all saves are synced! You may need to delete stale saves. ")):O("",!0),K?(k(),X(u(Un),{key:1,list:u(L).saves,handle:".handle",itemKey:q=>q},{item:G(({element:q})=>[s(Ft,{save:p.value[q],onOpen:Ee=>S(q),onExport:Ee=>b(q),onEditName:Ee=>y(q,Ee),onDuplicate:Ee=>w(q),onDelete:Ee=>v(q)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):O("",!0),s(Vt,{modelValue:d.value,"onUpdate:modelValue":I[8]||(I[8]=q=>d.value=q),title:"Import Save",placeholder:"Paste your save here!",class:ee({importingFailed:a.value})},null,8,["modelValue","class"]),m("div",Lu,[I[26]||(I[26]=m("span",{class:"field-title"},"Create Save",-1)),m("div",qu,[m("button",{class:"button",onClick:I[9]||(I[9]=q=>S(u(Qe)().id))},"New Game")])]),s(ye,{title:u(Ui),modelValue:u(bt),"onUpdate:modelValue":I[10]||(I[10]=q=>re(bt)?bt.value=q:null)},null,8,["title","modelValue"]),u(bt)?O("",!0):(k(),X(dn,{key:2,class:"button save-button",onClick:I[11]||(I[11]=q=>u(ie)())},{default:G(()=>I[27]||(I[27]=[g("Manually save")])),_:1}))])):O("",!0),ne("appearance")?(k(),T("div",Uu,[s(Ut),s(ye,{title:u(zi),modelValue:u(zt),"onUpdate:modelValue":I[12]||(I[12]=q=>re(zt)?zt.value=q:null)},null,8,["title","modelValue"])])):O("",!0),ne("notation")?(k(),T("div",Bu,[m("details",zu,[I[37]||(I[37]=m("summary",{class:"subtitle",style:{"margin-top":"12px"}},"Modifiers",-1)),m("details",Gu,[I[29]||(I[29]=m("summary",{class:"notation-modifier-title"},"Unconditional Modifiers",-1)),m("div",ju,[s(le,{display:u(Pi),direction:u(Ae)},{default:G(()=>[m("div",Hu,[I[28]||(I[28]=m("span",{class:"configurable-notation-modifier"},"Precision+",-1)),s(ye,{modelValue:u(jt),"onUpdate:modelValue":I[13]||(I[13]=q=>re(jt)?jt.value=q:null),style:{background:"transparent",padding:"0"}},null,8,["modelValue"])])]),_:1},8,["display","direction"])]),u(L).insanePrecision?(k(),X(dt,{key:0,options:_,title:u(Ri),modelValue:u(Xt),"onUpdate:modelValue":I[14]||(I[14]=q=>re(Xt)?Xt.value=q:null)},null,8,["title","modelValue"])):O("",!0)]),m("details",null,[I[33]||(I[33]=m("summary",{class:"notation-modifier-title"},"Partial Overrides",-1)),m("div",Wu,[s(le,{display:u(Ti),direction:u(Ae)},{default:G(()=>[m("div",Qu,[I[30]||(I[30]=m("span",null,"Engineering",-1)),s(ye,{modelValue:u(Gt),"onUpdate:modelValue":I[15]||(I[15]=q=>re(Gt)?Gt.value=q:null),style:{background:"transparent",padding:"0"}},null,8,["modelValue"])])]),_:1},8,["display","direction"]),s(le,{display:u($i),direction:u(Ae)},{default:G(()=>[m("div",Ju,[I[31]||(I[31]=m("span",{class:"configurable-notation-modifier"},"Letters",-1)),s(ye,{modelValue:u(Qt),"onUpdate:modelValue":I[16]||(I[16]=q=>re(Qt)?Qt.value=q:null),style:{background:"transparent",padding:"0"}},null,8,["modelValue"])])]),_:1},8,["display","direction"]),s(le,{display:u(Ai),direction:u(Ae)},{default:G(()=>[m("div",Yu,[I[32]||(I[32]=m("span",null,"Infinity",-1)),s(ye,{modelValue:u(en),"onUpdate:modelValue":I[17]||(I[17]=q=>re(en)?en.value=q:null),style:{background:"transparent",padding:"0"}},null,8,["modelValue"])])]),_:1},8,["display","direction"])]),u(L).letterNumbers?(k(),X(Vt,{key:0,submitOnBlur:!0,placeholder:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",title:u(Di),modelValue:u(Zt),"onUpdate:modelValue":I[18]||(I[18]=q=>re(Zt)?Zt.value=q:null)},null,8,["title","modelValue"])):O("",!0)]),m("details",null,[I[36]||(I[36]=m("summary",{class:"notation-modifier-title"},"Full Overrides",-1)),m("div",Ku,[s(le,{display:u(Vi),direction:u(Ae)},{default:G(()=>[m("div",Zu,[I[34]||(I[34]=m("span",null,"Blind Mode",-1)),s(ye,{modelValue:u(Ht),"onUpdate:modelValue":I[19]||(I[19]=q=>re(Ht)?Ht.value=q:null),style:{background:"transparent",padding:"0"}},null,8,["modelValue"])])]),_:1},8,["display","direction"]),s(le,{display:u(Fi),direction:u(Ae)},{default:G(()=>[m("div",Xu,[I[35]||(I[35]=m("span",null,"YES/NO",-1)),s(ye,{modelValue:u(Wt),"onUpdate:modelValue":I[20]||(I[20]=q=>re(Wt)?Wt.value=q:null),style:{background:"transparent",padding:"0"}},null,8,["modelValue"])])]),_:1},8,["display","direction"])])])]),m("details",null,[I[38]||(I[38]=m("summary",{class:"subtitle"},"Thresholds",-1)),s(dt,{options:V,title:_i,modelValue:u(Kt),"onUpdate:modelValue":I[21]||(I[21]=q=>re(Kt)?Kt.value=q:null)},null,8,["modelValue"]),s(dt,{options:V,title:Oi,modelValue:u(Yt),"onUpdate:modelValue":I[22]||(I[22]=q=>re(Yt)?Yt.value=q:null)},null,8,["modelValue"]),s(dt,{options:x,title:Ei,modelValue:u(Jt),"onUpdate:modelValue":I[23]||(I[23]=q=>re(Jt)?Jt.value=q:null)},null,8,["modelValue"])]),m("details",ec,[I[39]||(I[39]=m("summary",{class:"subtitle"},"Preview",-1)),m("div",tc,[s(r)])])])):O("",!0),ne("lang")?(k(),T("div",nc)):O("",!0)]),_:1},8,["modelValue"]))}}),rc=te(ic,[["__scopeId","data-v-f052b98b"]]),ac={class:"discord"},sc={class:"discord-links"},oc={key:0},lc=["href"],uc=J({__name:"Nav",setup(n){const e=R(null),t=R(null),i=R(null),r=R(null),{useHeader:a,banner:d,title:o,discordName:c,discordLink:p,versionNumber:y}=H;function b(){window.open(p,"mywindow")}return F(()=>{var w;return((w=fe.value)==null?void 0:w.loggedIn)===!0&&!Ze.value.includes(L.active)}),(w,v)=>(k(),T(N,null,[m("div",Be({class:"overlay-nav"},w.$attrs),[m("div",{onClick:v[0]||(v[0]=S=>{var M;return(M=i.value)==null?void 0:M.open()})},[s(le,{display:"Settings",direction:u(ue).Right},{default:G(()=>v[3]||(v[3]=[m("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])]),m("div",{onClick:v[1]||(v[1]=S=>{var M;return(M=e.value)==null?void 0:M.open()})},[s(le,{display:"Info",direction:u(ue).Right},{default:G(()=>v[4]||(v[4]=[m("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),m("div",ac,[m("span",{onClick:b,class:"material-icons"},"discord"),m("ul",sc,[u(p)?(k(),T("li",oc,[m("a",{href:u(p),target:"_blank"},Q(u(c)),9,lc)])):O("",!0),v[5]||(v[5]=m("li",null,[m("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),v[6]||(v[6]=m("li",null,[m("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])]),v[7]||(v[7]=m("div",{style:{"flex-grow":"1"}},null,-1))],16),s(Au,{ref_key:"info",ref:e,onOpenChangelog:v[2]||(v[2]=S=>{var M;return(M=r.value)==null?void 0:M.open()})},null,512),s(kn,{ref_key:"savesManager",ref:t},null,512),s(rc,{ref_key:"options",ref:i},null,512)],64))}}),Ii=te(uc,[["__scopeId","data-v-2541e3b7"]]),cc={class:"inner-tab"},dc=J({__name:"Game",setup(n){const e=Ye($,"tabs"),t=F(()=>Object.keys(he)),i=H.useHeader;function r(a){const{display:d,name:o,color:c,minimizable:p,minimizedDisplay:y,minimized:b,nodes:w,forceHideGoBack:v}=a;return{display:d,name:o,color:c,minimizable:p,minimizedDisplay:y,minimized:b,nodes:w,forceHideGoBack:v}}return(a,d)=>(k(),T("div",{class:ee(["tabs-container",{useHeader:u(i)}])},[(k(!0),T(N,null,De(e.value,(o,c)=>{var p,y;return k(),T("div",{key:c,class:ee(["tab",u((p=u(he)[o])==null?void 0:p.classes)]),style:Ie(u((y=u(he)[o])==null?void 0:y.style))},[c===0&&!u(i)?(k(),X(Ii,{key:0})):O("",!0),m("div",cc,[t.value.includes(o)?(k(),X(pu,Be({key:0,ref_for:!0},r(u(he)[o]),{index:c,onSetMinimized:b=>u(he)[o].minimized.value=b}),null,16,["index","onSetMinimized"])):(k(),X(ir(o),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}}),fc=te(dc,[["__scopeId","data-v-2041cd59"]]),gc={key:0,class:"tpsDisplay"},mc={key:0},pc=J({__name:"TPS",setup(n){const e=F(()=>l.div(Y.lastTenTicks.length,Y.lastTenTicks.reduce((i,r)=>i+r,0))),t=()=>j(ae(l.div(Y.lastTenTicks.length,Y.lastTenTicks.reduce((i,r)=>i+r,0)),0,!1));return(i,r)=>e.value.isNan()?O("",!0):(k(),T("div",gc,[u($).devSpeed===0?(k(),T("span",mc,r[0]||(r[0]=[g("Paused"),m("br",null,null,-1)]))):O("",!0),r[1]||(r[1]=g("TPS: ")),s(t),r[2]||(r[2]=m("br",null,null,-1)),r[3]||(r[3]=g("v1.0 Î²5"))]))}}),vc=te(pc,[["__scopeId","data-v-6f8558d8"]]),hc=J({__name:"App",setup(n){const e=H.useHeader,t=F(()=>_t[L.theme].variables),i=Ye(L,"showTPS"),r=Ye(Y,"errors"),a=()=>ll.map(d=>j(d));return(d,o)=>r.value.length>0?(k(),T("div",{key:0,class:"error-container",style:Ie(t.value)},[s(Bn,{errors:r.value},null,8,["errors"])],4)):(k(),T(N,{key:1},[m("div",{id:"modal-root",style:Ie(t.value)},null,4),m("div",{class:ee(["app",{useHeader:u(e)}]),style:Ie(t.value)},[u(e)?(k(),X(Ii,{key:0})):O("",!0),s(fc),u(i.value)?(k(),X(vc,{key:1})):O("",!0),s(Rl),s(au),s(fu),s(Ql),s(a)],6)],64))}}),bc=te(hc,[["__scopeId","data-v-b45f2ee2"]]);oe.on("setupVue",n=>n.use(lr));const yc="modulepreload",wc=function(n,e){return new URL(n,e).href},On={},Nc=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){const d=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(p=>{if(p=wc(p,i),p in On)return;On[p]=!0;const y=p.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(!!i)for(let S=d.length-1;S>=0;S--){const M=d[S];if(M.href===p&&(!y||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${b}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":yc,y||(v.as="script"),v.crossOrigin="",v.href=p,c&&v.setAttribute("nonce",c),document.head.appendChild(v),y)return new Promise((S,M)=>{v.addEventListener("load",S),v.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(d){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=d,window.dispatchEvent(o),!o.defaultPrevented)throw d}return r.then(d=>{for(const o of d||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function Cc(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:d}=n;let o,c;const p=async(b=!0)=>{await c};async function y(){if("serviceWorker"in navigator){if(o=await Nc(async()=>{const{Workbox:b}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:b}},[],import.meta.url).then(({Workbox:b})=>new b("./sw.js",{scope:"./",type:"classic"})).catch(b=>{d==null||d(b)}),!o)return;o.addEventListener("activated",b=>{(b.isUpdate||b.isExternal)&&window.location.reload()}),o.addEventListener("installed",b=>{b.isUpdate||i==null||i()}),o.register({immediate:e}).then(b=>{a?a("./sw.js",b):r==null||r(b)}).catch(b=>{d==null||d(b)})}}return c=y(),p}function Sc(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:d}=n,o=R(!1),c=R(!1);return{updateServiceWorker:Cc({immediate:e,onNeedRefresh(){o.value=!0,t==null||t()},onOfflineReady(){c.value=!0,i==null||i()},onRegistered:r,onRegisteredSW:a,onRegisterError:d}),offlineReady:c,needRefresh:o}}let et=null;function At(){const n=Date.now();let e=(n-$.time)/1e3;$.time=n;const t=e;if(Y.lastTenTicks.push(t),Y.lastTenTicks.length>10&&(Y.lastTenTicks=Y.lastTenTicks.slice(1)),!(it!=null&&it.value&&!$.keepGoing)&&!Y.hasNaN&&(e=Math.max(e,0),$.devSpeed!==0)){if(qt.value=!1,$.offlineTime!=null){if(l.gt($.offlineTime,H.offlineLimit*3600)&&($.offlineTime=H.offlineLimit*3600),l.gt($.offlineTime,0)&&$.devSpeed!==0){const i=Math.max($.offlineTime/10,e);$.offlineTime=$.offlineTime-i,e+=i}else $.devSpeed===0&&($.offlineTime+=e);(!$.offlineProd||l.lt($.offlineTime,0))&&($.offlineTime=null)}e=Math.min(e,H.maxTickLength),$.devSpeed!=null&&(e*=$.devSpeed),Number.isFinite(e)||(e=1e308),!l.eq(e,0)&&($.timePlayed+=e,Number.isFinite($.timePlayed)||($.timePlayed=1e308),oe.emit("update",e,t),L.unthrottled?(requestAnimationFrame(At),et!=null&&(clearInterval(et),et=null)):et==null&&(et=setInterval(At,50)))}}async function kc(){L.unthrottled?requestAnimationFrame(At):et=setInterval(At,50)}be(it,n=>{n&&oe.emit("gameWon")});setInterval(()=>{Y.mouseActivity=[...Y.mouseActivity.slice(-7),!1]},1e3*60*60);const xn=console.error;console.error=function(...n){xn(...n)};window.onerror=function(n,e,t,i,r){return Y.errors.push(r instanceof Error?r:new Error(JSON.stringify(r))),xn(r),!0};window.onunhandledrejection=function(n){Y.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),xn(n.reason)};document.title=H.title;window.projInfo=H;H.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await nl();const n=window.vue=rr(bc);n.config.errorHandler=function(e,t,i){console.error(e,i,t)},oe.emit("setupVue",n),n.mount("#app"),rt(()=>{const e=ur();Sc({immediate:!0,onOfflineReady(){e.info("App ready to work offline")},onRegisterError:console.warn,onRegistered:console.info})}),kc()});
